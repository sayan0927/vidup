"use strict";var mediaStreamLibrary=(()=>{var Fa=Object.create;var Lt=Object.defineProperty,Ua=Object.defineProperties,ka=Object.getOwnPropertyDescriptor,Da=Object.getOwnPropertyDescriptors,Pa=Object.getOwnPropertyNames,Ri=Object.getOwnPropertySymbols,Na=Object.getPrototypeOf,Bi=Object.prototype.hasOwnProperty,Oa=Object.prototype.propertyIsEnumerable;var L=Math.pow,sn=(r,e,t)=>e in r?Lt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,J=(r,e)=>{for(var t in e||(e={}))Bi.call(e,t)&&sn(r,t,e[t]);if(Ri)for(var t of Ri(e))Oa.call(e,t)&&sn(r,t,e[t]);return r},Be=(r,e)=>Ua(r,Da(e));var Ha=(r,e)=>()=>(r&&(e=r(r=0)),e);var B=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),zt=(r,e)=>{for(var t in e)Lt(r,t,{get:e[t],enumerable:!0})},Ci=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Pa(e))!Bi.call(r,i)&&i!==t&&Lt(r,i,{get:()=>e[i],enumerable:!(n=ka(e,i))||n.enumerable});return r};var A=(r,e,t)=>(t=r!=null?Fa(Na(r)):{},Ci(e||!r||!r.__esModule?Lt(t,"default",{value:r,enumerable:!0}):t,r)),qa=r=>Ci(Lt({},"__esModule",{value:!0}),r);var c=(r,e,t)=>(sn(r,typeof e!="symbol"?e+"":e,t),t);var Q=(r,e,t)=>new Promise((n,i)=>{var o=u=>{try{a(t.next(u))}catch(f){i(f)}},s=u=>{try{a(t.throw(u))}catch(f){i(f)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(r,e)).next())});var un=B(Vt=>{"use strict";l();Vt.byteLength=Wa;Vt.toByteArray=Ga;Vt.fromByteArray=Ya;var fe=[],Z=[],ja=typeof Uint8Array!="undefined"?Uint8Array:Array,an="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(je=0,Mi=an.length;je<Mi;++je)fe[je]=an[je],Z[an.charCodeAt(je)]=je;var je,Mi;Z[45]=62;Z[95]=63;function Ii(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Wa(r){var e=Ii(r),t=e[0],n=e[1];return(t+n)*3/4-n}function $a(r,e,t){return(e+t)*3/4-t}function Ga(r){var e,t=Ii(r),n=t[0],i=t[1],o=new ja($a(r,n,i)),s=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=Z[r.charCodeAt(u)]<<18|Z[r.charCodeAt(u+1)]<<12|Z[r.charCodeAt(u+2)]<<6|Z[r.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Z[r.charCodeAt(u)]<<2|Z[r.charCodeAt(u+1)]>>4,o[s++]=e&255),i===1&&(e=Z[r.charCodeAt(u)]<<10|Z[r.charCodeAt(u+1)]<<4|Z[r.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function za(r){return fe[r>>18&63]+fe[r>>12&63]+fe[r>>6&63]+fe[r&63]}function Va(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(za(n));return i.join("")}function Ya(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,a=t-n;s<a;s+=o)i.push(Va(r,s,s+o>a?a:s+o));return n===1?(e=r[t-1],i.push(fe[e>>2]+fe[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(fe[e>>10]+fe[e>>4&63]+fe[e<<2&63]+"=")),i.join("")}});var cn=B(fn=>{l();fn.read=function(r,e,t,n,i){var o,s,a=i*8-n-1,u=(1<<a)-1,f=u>>1,p=-7,d=t?i-1:0,y=t?-1:1,g=r[e+d];for(d+=y,o=g&(1<<-p)-1,g>>=-p,p+=a;p>0;o=o*256+r[e+d],d+=y,p-=8);for(s=o&(1<<-p)-1,o>>=-p,p+=n;p>0;s=s*256+r[e+d],d+=y,p-=8);if(o===0)o=1-f;else{if(o===u)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-f}return(g?-1:1)*s*Math.pow(2,o-n)};fn.write=function(r,e,t,n,i,o){var s,a,u,f=o*8-i-1,p=(1<<f)-1,d=p>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:o-1,_=n?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=p):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+d>=1?e+=y/u:e+=y*Math.pow(2,1-d),e*u>=2&&(s++,u/=2),s+d>=p?(a=0,s=p):s+d>=1?(a=(e*u-1)*Math.pow(2,i),s=s+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;r[t+g]=a&255,g+=_,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;r[t+g]=s&255,g+=_,s/=256,f-=8);r[t+g-_]|=b*128}});var Vi=B(st=>{"use strict";l();var ln=un(),it=cn(),Ai=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;st.Buffer=h;st.SlowBuffer=eu;st.INSPECT_MAX_BYTES=50;var Yt=2147483647;st.kMaxLength=Yt;h.TYPED_ARRAY_SUPPORT=Xa();!h.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Xa(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch(r){return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}});Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function we(r){if(r>Yt)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,h.prototype),e}function h(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return mn(r)}return ki(r,e,t)}h.poolSize=8192;function ki(r,e,t){if(typeof r=="string")return Ja(r,e);if(ArrayBuffer.isView(r))return Qa(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(ce(r,ArrayBuffer)||r&&ce(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ce(r,SharedArrayBuffer)||r&&ce(r.buffer,SharedArrayBuffer)))return dn(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return h.from(n,e,t);let i=Za(r);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return h.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}h.from=function(r,e,t){return ki(r,e,t)};Object.setPrototypeOf(h.prototype,Uint8Array.prototype);Object.setPrototypeOf(h,Uint8Array);function Di(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Ka(r,e,t){return Di(r),r<=0?we(r):e!==void 0?typeof t=="string"?we(r).fill(e,t):we(r).fill(e):we(r)}h.alloc=function(r,e,t){return Ka(r,e,t)};function mn(r){return Di(r),we(r<0?0:yn(r)|0)}h.allocUnsafe=function(r){return mn(r)};h.allocUnsafeSlow=function(r){return mn(r)};function Ja(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Pi(r,e)|0,n=we(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function pn(r){let e=r.length<0?0:yn(r.length)|0,t=we(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Qa(r){if(ce(r,Uint8Array)){let e=new Uint8Array(r);return dn(e.buffer,e.byteOffset,e.byteLength)}return pn(r)}function dn(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,h.prototype),n}function Za(r){if(h.isBuffer(r)){let e=yn(r.length)|0,t=we(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||xn(r.length)?we(0):pn(r);if(r.type==="Buffer"&&Array.isArray(r.data))return pn(r.data)}function yn(r){if(r>=Yt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Yt.toString(16)+" bytes");return r|0}function eu(r){return+r!=r&&(r=0),h.alloc(+r)}h.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==h.prototype};h.compare=function(e,t){if(ce(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),ce(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return h.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=h.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(ce(s,Uint8Array))o+s.length>i.length?(h.isBuffer(s)||(s=h.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(h.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Pi(r,e){if(h.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||ce(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return hn(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return zi(r).length;default:if(i)return n?-1:hn(r).length;e=(""+e).toLowerCase(),i=!0}}h.byteLength=Pi;function tu(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return lu(this,e,t);case"utf8":case"utf-8":return Oi(this,e,t);case"ascii":return fu(this,e,t);case"latin1":case"binary":return cu(this,e,t);case"base64":return au(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pu(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}h.prototype._isBuffer=!0;function We(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}h.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)We(this,t,t+1);return this};h.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)We(this,t,t+3),We(this,t+1,t+2);return this};h.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)We(this,t,t+7),We(this,t+1,t+6),We(this,t+2,t+5),We(this,t+3,t+4);return this};h.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Oi(this,0,e):tu.apply(this,arguments)};h.prototype.toLocaleString=h.prototype.toString;h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:h.compare(this,e)===0};h.prototype.inspect=function(){let e="",t=st.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Ai&&(h.prototype[Ai]=h.prototype.inspect);h.prototype.compare=function(e,t,n,i,o){if(ce(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=n-t,u=Math.min(s,a),f=this.slice(i,o),p=e.slice(t,n);for(let d=0;d<u;++d)if(f[d]!==p[d]){s=f[d],a=p[d];break}return s<a?-1:a<s?1:0};function Ni(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,xn(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=h.from(e,n)),h.isBuffer(e))return e.length===0?-1:Li(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Li(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Li(r,e,t,n,i){let o=1,s=r.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,a/=2,t/=2}function u(p,d){return o===1?p[d]:p.readUInt16BE(d*o)}let f;if(i){let p=-1;for(f=t;f<s;f++)if(u(r,f)===u(e,p===-1?0:f-p)){if(p===-1&&(p=f),f-p+1===a)return p*o}else p!==-1&&(f-=f-p),p=-1}else for(t+a>s&&(t=s-a),f=t;f>=0;f--){let p=!0;for(let d=0;d<a;d++)if(u(r,f+d)!==u(e,d)){p=!1;break}if(p)return f}return-1}h.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};h.prototype.indexOf=function(e,t,n){return Ni(this,e,t,n,!0)};h.prototype.lastIndexOf=function(e,t,n){return Ni(this,e,t,n,!1)};function ru(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(e.substr(s*2,2),16);if(xn(a))return s;r[t+s]=a}return s}function nu(r,e,t,n){return Xt(hn(e,r.length-t),r,t,n)}function iu(r,e,t,n){return Xt(yu(e),r,t,n)}function ou(r,e,t,n){return Xt(zi(e),r,t,n)}function su(r,e,t,n){return Xt(gu(e,r.length-t),r,t,n)}h.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return ru(this,e,t,n);case"utf8":case"utf-8":return nu(this,e,t,n);case"ascii":case"latin1":case"binary":return iu(this,e,t,n);case"base64":return ou(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return su(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function au(r,e,t){return e===0&&t===r.length?ln.fromByteArray(r):ln.fromByteArray(r.slice(e,t))}function Oi(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=t){let u,f,p,d;switch(a){case 1:o<128&&(s=o);break;case 2:u=r[i+1],(u&192)===128&&(d=(o&31)<<6|u&63,d>127&&(s=d));break;case 3:u=r[i+1],f=r[i+2],(u&192)===128&&(f&192)===128&&(d=(o&15)<<12|(u&63)<<6|f&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:u=r[i+1],f=r[i+2],p=r[i+3],(u&192)===128&&(f&192)===128&&(p&192)===128&&(d=(o&15)<<18|(u&63)<<12|(f&63)<<6|p&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return uu(n)}var Fi=4096;function uu(r){let e=r.length;if(e<=Fi)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Fi));return t}function fu(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function cu(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function lu(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=xu[r[o]];return i}function pu(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}h.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,h.prototype),i};function O(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||O(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||O(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e=e>>>0,t||O(e,1,this.length),this[e]};h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||O(e,2,this.length),this[e]|this[e+1]<<8};h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||O(e,2,this.length),this[e]<<8|this[e+1]};h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||O(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};h.prototype.readBigUInt64LE=Ce(function(e){e=e>>>0,ot(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ft(e,this.length-8);let i=t+this[++e]*L(2,8)+this[++e]*L(2,16)+this[++e]*L(2,24),o=this[++e]+this[++e]*L(2,8)+this[++e]*L(2,16)+n*L(2,24);return BigInt(i)+(BigInt(o)<<BigInt(32))});h.prototype.readBigUInt64BE=Ce(function(e){e=e>>>0,ot(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ft(e,this.length-8);let i=t*L(2,24)+this[++e]*L(2,16)+this[++e]*L(2,8)+this[++e],o=this[++e]*L(2,24)+this[++e]*L(2,16)+this[++e]*L(2,8)+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});h.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||O(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};h.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||O(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};h.prototype.readInt8=function(e,t){return e=e>>>0,t||O(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};h.prototype.readInt16LE=function(e,t){e=e>>>0,t||O(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};h.prototype.readInt16BE=function(e,t){e=e>>>0,t||O(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};h.prototype.readInt32LE=function(e,t){return e=e>>>0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};h.prototype.readInt32BE=function(e,t){return e=e>>>0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};h.prototype.readBigInt64LE=Ce(function(e){e=e>>>0,ot(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ft(e,this.length-8);let i=this[e+4]+this[e+5]*L(2,8)+this[e+6]*L(2,16)+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*L(2,8)+this[++e]*L(2,16)+this[++e]*L(2,24))});h.prototype.readBigInt64BE=Ce(function(e){e=e>>>0,ot(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ft(e,this.length-8);let i=(t<<24)+this[++e]*L(2,16)+this[++e]*L(2,8)+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*L(2,24)+this[++e]*L(2,16)+this[++e]*L(2,8)+n)});h.prototype.readFloatLE=function(e,t){return e=e>>>0,t||O(e,4,this.length),it.read(this,e,!0,23,4)};h.prototype.readFloatBE=function(e,t){return e=e>>>0,t||O(e,4,this.length),it.read(this,e,!1,23,4)};h.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||O(e,8,this.length),it.read(this,e,!0,52,8)};h.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||O(e,8,this.length),it.read(this,e,!1,52,8)};function $(r,e,t,n,i,o){if(!h.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;$(this,e,t,n,a,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;$(this,e,t,n,a,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,1,255,0),this[t]=e&255,t+1};h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Hi(r,e,t,n,i){Gi(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function qi(r,e,t,n,i){Gi(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}h.prototype.writeBigUInt64LE=Ce(function(e,t=0){return Hi(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});h.prototype.writeBigUInt64BE=Ce(function(e,t=0){return qi(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});h.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*n-1);$(this,e,t,n,u-1,-u)}let o=0,s=1,a=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&a===0&&this[t+o-1]!==0&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n};h.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*n-1);$(this,e,t,n,u-1,-u)}let o=n-1,s=1,a=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[t+o+1]!==0&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n};h.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};h.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};h.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};h.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};h.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};h.prototype.writeBigInt64LE=Ce(function(e,t=0){return Hi(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});h.prototype.writeBigInt64BE=Ce(function(e,t=0){return qi(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ji(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Wi(r,e,t,n,i){return e=+e,t=t>>>0,i||ji(r,e,t,4,34028234663852886e22,-34028234663852886e22),it.write(r,e,t,n,23,4),t+4}h.prototype.writeFloatLE=function(e,t,n){return Wi(this,e,t,!0,n)};h.prototype.writeFloatBE=function(e,t,n){return Wi(this,e,t,!1,n)};function $i(r,e,t,n,i){return e=+e,t=t>>>0,i||ji(r,e,t,8,17976931348623157e292,-17976931348623157e292),it.write(r,e,t,n,52,8),t+8}h.prototype.writeDoubleLE=function(e,t,n){return $i(this,e,t,!0,n)};h.prototype.writeDoubleBE=function(e,t,n){return $i(this,e,t,!1,n)};h.prototype.copy=function(e,t,n,i){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};h.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=h.isBuffer(e)?e:h.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var nt={};function gn(r,e,t){nt[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}gn("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);gn("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);gn("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>L(2,32)?i=Ui(String(t)):typeof t=="bigint"&&(i=String(t),(t>L(BigInt(2),BigInt(32))||t<-L(BigInt(2),BigInt(32)))&&(i=Ui(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Ui(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function du(r,e,t){ot(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Ft(e,r.length-(t+1))}function Gi(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${t}${s}`,new nt.ERR_OUT_OF_RANGE("value",a,r)}du(n,i,o)}function ot(r,e){if(typeof r!="number")throw new nt.ERR_INVALID_ARG_TYPE(e,"number",r)}function Ft(r,e,t){throw Math.floor(r)!==r?(ot(r,t),new nt.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new nt.ERR_BUFFER_OUT_OF_BOUNDS:new nt.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var hu=/[^+/0-9A-Za-z-_]/g;function mu(r){if(r=r.split("=")[0],r=r.trim().replace(hu,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function hn(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function yu(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function gu(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function zi(r){return ln.toByteArray(mu(r))}function Xt(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function ce(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function xn(r){return r!==r}var xu=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function Ce(r){return typeof BigInt=="undefined"?bu:r}function bu(){throw new Error("BigInt not supported")}});var Qi=B((ap,Ji)=>{l();var k=Ji.exports={},le,pe;function bn(){throw new Error("setTimeout has not been defined")}function wn(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?le=setTimeout:le=bn}catch(r){le=bn}try{typeof clearTimeout=="function"?pe=clearTimeout:pe=wn}catch(r){pe=wn}})();function Yi(r){if(le===setTimeout)return setTimeout(r,0);if((le===bn||!le)&&setTimeout)return le=setTimeout,setTimeout(r,0);try{return le(r,0)}catch(e){try{return le.call(null,r,0)}catch(t){return le.call(this,r,0)}}}function wu(r){if(pe===clearTimeout)return clearTimeout(r);if((pe===wn||!pe)&&clearTimeout)return pe=clearTimeout,clearTimeout(r);try{return pe(r)}catch(e){try{return pe.call(null,r)}catch(t){return pe.call(this,r)}}}var _e=[],at=!1,$e,Kt=-1;function _u(){!at||!$e||(at=!1,$e.length?_e=$e.concat(_e):Kt=-1,_e.length&&Xi())}function Xi(){if(!at){var r=Yi(_u);at=!0;for(var e=_e.length;e;){for($e=_e,_e=[];++Kt<e;)$e&&$e[Kt].run();Kt=-1,e=_e.length}$e=null,at=!1,wu(r)}}k.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];_e.push(new Ki(r,e)),_e.length===1&&!at&&Yi(Xi)};function Ki(r,e){this.fun=r,this.array=e}Ki.prototype.run=function(){this.fun.apply(null,this.array)};k.title="browser";k.browser=!0;k.env={};k.argv=[];k.version="";k.versions={};function Ee(){}k.on=Ee;k.addListener=Ee;k.once=Ee;k.off=Ee;k.removeListener=Ee;k.removeAllListeners=Ee;k.emit=Ee;k.prependListener=Ee;k.prependOnceListener=Ee;k.listeners=function(r){return[]};k.binding=function(r){throw new Error("process.binding is not supported")};k.cwd=function(){return"/"};k.chdir=function(r){throw new Error("process.chdir is not supported")};k.umask=function(){return 0}});var Zi,Eu,l=Ha(()=>{"use strict";Zi=A(Vi(),1),Eu=A(Qi(),1);window.Buffer=Zi.Buffer;window.process_browser=Eu});var Zt=B((fp,_n)=>{"use strict";l();var ut=typeof Reflect=="object"?Reflect:null,eo=ut&&typeof ut.apply=="function"?ut.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Jt;ut&&typeof ut.ownKeys=="function"?Jt=ut.ownKeys:Object.getOwnPropertySymbols?Jt=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Jt=function(e){return Object.getOwnPropertyNames(e)};function vu(r){console&&console.warn&&console.warn(r)}var ro=Number.isNaN||function(e){return e!==e};function C(){C.init.call(this)}_n.exports=C;_n.exports.once=Bu;C.EventEmitter=C;C.prototype._events=void 0;C.prototype._eventsCount=0;C.prototype._maxListeners=void 0;var to=10;function Qt(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return to},set:function(r){if(typeof r!="number"||r<0||ro(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");to=r}});C.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};C.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ro(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function no(r){return r._maxListeners===void 0?C.defaultMaxListeners:r._maxListeners}C.prototype.getMaxListeners=function(){return no(this)};C.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")eo(u,this,t);else for(var f=u.length,p=uo(u,f),n=0;n<f;++n)eo(p[n],this,t);return!0};function io(r,e,t,n){var i,o,s;if(Qt(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=no(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=s.length,vu(a)}return r}C.prototype.addListener=function(e,t){return io(this,e,t,!1)};C.prototype.on=C.prototype.addListener;C.prototype.prependListener=function(e,t){return io(this,e,t,!0)};function Su(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function oo(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=Su.bind(n);return i.listener=t,n.wrapFn=i,i}C.prototype.once=function(e,t){return Qt(t),this.on(e,oo(this,e,t)),this};C.prototype.prependOnceListener=function(e,t){return Qt(t),this.prependListener(e,oo(this,e,t)),this};C.prototype.removeListener=function(e,t){var n,i,o,s,a;if(Qt(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():Tu(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};C.prototype.off=C.prototype.removeListener;C.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function so(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?Ru(i):uo(i,i.length)}C.prototype.listeners=function(e){return so(this,e,!0)};C.prototype.rawListeners=function(e){return so(this,e,!1)};C.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):ao.call(r,e)};C.prototype.listenerCount=ao;function ao(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}C.prototype.eventNames=function(){return this._eventsCount>0?Jt(this._events):[]};function uo(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function Tu(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function Ru(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function Bu(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}fo(r,e,o,{once:!0}),e!=="error"&&Cu(r,i,{once:!0})})}function Cu(r,e,t){typeof r.on=="function"&&fo(r,"error",e,t)}function fo(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var Ge=B((lp,En)=>{l();typeof Object.create=="function"?En.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:En.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var vn=B((dp,co)=>{l();co.exports=Zt().EventEmitter});var Ut=B(ct=>{"use strict";l();var Sn=un(),ft=cn(),lo=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ct.Buffer=m;ct.SlowBuffer=Uu;ct.INSPECT_MAX_BYTES=50;var er=2147483647;ct.kMaxLength=er;m.TYPED_ARRAY_SUPPORT=Mu();!m.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Mu(){try{var r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch(t){return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}});Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});function ve(r){if(r>er)throw new RangeError('The value "'+r+'" is invalid for option "size"');var e=new Uint8Array(r);return Object.setPrototypeOf(e,m.prototype),e}function m(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Cn(r)}return mo(r,e,t)}m.poolSize=8192;function mo(r,e,t){if(typeof r=="string")return Au(r,e);if(ArrayBuffer.isView(r))return Lu(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(de(r,ArrayBuffer)||r&&de(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(de(r,SharedArrayBuffer)||r&&de(r.buffer,SharedArrayBuffer)))return Rn(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return m.from(n,e,t);var i=Fu(r);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return m.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}m.from=function(r,e,t){return mo(r,e,t)};Object.setPrototypeOf(m.prototype,Uint8Array.prototype);Object.setPrototypeOf(m,Uint8Array);function yo(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Iu(r,e,t){return yo(r),r<=0?ve(r):e!==void 0?typeof t=="string"?ve(r).fill(e,t):ve(r).fill(e):ve(r)}m.alloc=function(r,e,t){return Iu(r,e,t)};function Cn(r){return yo(r),ve(r<0?0:Mn(r)|0)}m.allocUnsafe=function(r){return Cn(r)};m.allocUnsafeSlow=function(r){return Cn(r)};function Au(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!m.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var t=go(r,e)|0,n=ve(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Tn(r){for(var e=r.length<0?0:Mn(r.length)|0,t=ve(e),n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Lu(r){if(de(r,Uint8Array)){var e=new Uint8Array(r);return Rn(e.buffer,e.byteOffset,e.byteLength)}return Tn(r)}function Rn(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,m.prototype),n}function Fu(r){if(m.isBuffer(r)){var e=Mn(r.length)|0,t=ve(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||In(r.length)?ve(0):Tn(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Tn(r.data)}function Mn(r){if(r>=er)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+er.toString(16)+" bytes");return r|0}function Uu(r){return+r!=r&&(r=0),m.alloc(+r)}m.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==m.prototype};m.compare=function(e,t){if(de(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),de(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),!m.isBuffer(e)||!m.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};m.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return m.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=m.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(de(s,Uint8Array))o+s.length>i.length?m.from(s).copy(i,o):Uint8Array.prototype.set.call(i,s,o);else if(m.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function go(r,e){if(m.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||de(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Bn(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return vo(r).length;default:if(i)return n?-1:Bn(r).length;e=(""+e).toLowerCase(),i=!0}}m.byteLength=go;function ku(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Gu(this,e,t);case"utf8":case"utf-8":return bo(this,e,t);case"ascii":return Wu(this,e,t);case"latin1":case"binary":return $u(this,e,t);case"base64":return qu(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return zu(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}m.prototype._isBuffer=!0;function ze(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}m.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ze(this,t,t+1);return this};m.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ze(this,t,t+3),ze(this,t+1,t+2);return this};m.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ze(this,t,t+7),ze(this,t+1,t+6),ze(this,t+2,t+5),ze(this,t+3,t+4);return this};m.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?bo(this,0,e):ku.apply(this,arguments)};m.prototype.toLocaleString=m.prototype.toString;m.prototype.equals=function(e){if(!m.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:m.compare(this,e)===0};m.prototype.inspect=function(){var e="",t=ct.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};lo&&(m.prototype[lo]=m.prototype.inspect);m.prototype.compare=function(e,t,n,i,o){if(de(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var s=o-i,a=n-t,u=Math.min(s,a),f=this.slice(i,o),p=e.slice(t,n),d=0;d<u;++d)if(f[d]!==p[d]){s=f[d],a=p[d];break}return s<a?-1:a<s?1:0};function xo(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,In(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=m.from(e,n)),m.isBuffer(e))return e.length===0?-1:po(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):po(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function po(r,e,t,n,i){var o=1,s=r.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,a/=2,t/=2}function u(g,_){return o===1?g[_]:g.readUInt16BE(_*o)}var f;if(i){var p=-1;for(f=t;f<s;f++)if(u(r,f)===u(e,p===-1?0:f-p)){if(p===-1&&(p=f),f-p+1===a)return p*o}else p!==-1&&(f-=f-p),p=-1}else for(t+a>s&&(t=s-a),f=t;f>=0;f--){for(var d=!0,y=0;y<a;y++)if(u(r,f+y)!==u(e,y)){d=!1;break}if(d)return f}return-1}m.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};m.prototype.indexOf=function(e,t,n){return xo(this,e,t,n,!0)};m.prototype.lastIndexOf=function(e,t,n){return xo(this,e,t,n,!1)};function Du(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(s*2,2),16);if(In(a))return s;r[t+s]=a}return s}function Pu(r,e,t,n){return tr(Bn(e,r.length-t),r,t,n)}function Nu(r,e,t,n){return tr(Xu(e),r,t,n)}function Ou(r,e,t,n){return tr(vo(e),r,t,n)}function Hu(r,e,t,n){return tr(Ku(e,r.length-t),r,t,n)}m.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return Du(this,e,t,n);case"utf8":case"utf-8":return Pu(this,e,t,n);case"ascii":case"latin1":case"binary":return Nu(this,e,t,n);case"base64":return Ou(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Hu(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function qu(r,e,t){return e===0&&t===r.length?Sn.fromByteArray(r):Sn.fromByteArray(r.slice(e,t))}function bo(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var o=r[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=t){var u,f,p,d;switch(a){case 1:o<128&&(s=o);break;case 2:u=r[i+1],(u&192)===128&&(d=(o&31)<<6|u&63,d>127&&(s=d));break;case 3:u=r[i+1],f=r[i+2],(u&192)===128&&(f&192)===128&&(d=(o&15)<<12|(u&63)<<6|f&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:u=r[i+1],f=r[i+2],p=r[i+3],(u&192)===128&&(f&192)===128&&(p&192)===128&&(d=(o&15)<<18|(u&63)<<12|(f&63)<<6|p&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return ju(n)}var ho=4096;function ju(r){var e=r.length;if(e<=ho)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=ho));return t}function Wu(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function $u(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function Gu(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=e;o<t;++o)i+=Ju[r[o]];return i}function zu(r,e,t){for(var n=r.slice(e,t),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}m.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,m.prototype),i};function H(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||H(e,t,this.length);for(var i=this[e],o=1,s=0;++s<t&&(o*=256);)i+=this[e+s]*o;return i};m.prototype.readUintBE=m.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||H(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i};m.prototype.readUint8=m.prototype.readUInt8=function(e,t){return e=e>>>0,t||H(e,1,this.length),this[e]};m.prototype.readUint16LE=m.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||H(e,2,this.length),this[e]|this[e+1]<<8};m.prototype.readUint16BE=m.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||H(e,2,this.length),this[e]<<8|this[e+1]};m.prototype.readUint32LE=m.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||H(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};m.prototype.readUint32BE=m.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||H(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};m.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||H(e,t,this.length);for(var i=this[e],o=1,s=0;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};m.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||H(e,t,this.length);for(var i=t,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};m.prototype.readInt8=function(e,t){return e=e>>>0,t||H(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};m.prototype.readInt16LE=function(e,t){e=e>>>0,t||H(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};m.prototype.readInt16BE=function(e,t){e=e>>>0,t||H(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};m.prototype.readInt32LE=function(e,t){return e=e>>>0,t||H(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};m.prototype.readInt32BE=function(e,t){return e=e>>>0,t||H(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};m.prototype.readFloatLE=function(e,t){return e=e>>>0,t||H(e,4,this.length),ft.read(this,e,!0,23,4)};m.prototype.readFloatBE=function(e,t){return e=e>>>0,t||H(e,4,this.length),ft.read(this,e,!1,23,4)};m.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||H(e,8,this.length),ft.read(this,e,!0,52,8)};m.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||H(e,8,this.length),ft.read(this,e,!1,52,8)};function G(r,e,t,n,i,o){if(!m.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){var o=Math.pow(2,8*n)-1;G(this,e,t,n,o,0)}var s=1,a=0;for(this[t]=e&255;++a<n&&(s*=256);)this[t+a]=e/s&255;return t+n};m.prototype.writeUintBE=m.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){var o=Math.pow(2,8*n)-1;G(this,e,t,n,o,0)}var s=n-1,a=1;for(this[t+s]=e&255;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+n};m.prototype.writeUint8=m.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,1,255,0),this[t]=e&255,t+1};m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};m.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){var o=Math.pow(2,8*n-1);G(this,e,t,n,o-1,-o)}var s=0,a=1,u=0;for(this[t]=e&255;++s<n&&(a*=256);)e<0&&u===0&&this[t+s-1]!==0&&(u=1),this[t+s]=(e/a>>0)-u&255;return t+n};m.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){var o=Math.pow(2,8*n-1);G(this,e,t,n,o-1,-o)}var s=n-1,a=1,u=0;for(this[t+s]=e&255;--s>=0&&(a*=256);)e<0&&u===0&&this[t+s+1]!==0&&(u=1),this[t+s]=(e/a>>0)-u&255;return t+n};m.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};m.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};m.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};m.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};m.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||G(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function wo(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function _o(r,e,t,n,i){return e=+e,t=t>>>0,i||wo(r,e,t,4,34028234663852886e22,-34028234663852886e22),ft.write(r,e,t,n,23,4),t+4}m.prototype.writeFloatLE=function(e,t,n){return _o(this,e,t,!0,n)};m.prototype.writeFloatBE=function(e,t,n){return _o(this,e,t,!1,n)};function Eo(r,e,t,n,i){return e=+e,t=t>>>0,i||wo(r,e,t,8,17976931348623157e292,-17976931348623157e292),ft.write(r,e,t,n,52,8),t+8}m.prototype.writeDoubleLE=function(e,t,n){return Eo(this,e,t,!0,n)};m.prototype.writeDoubleBE=function(e,t,n){return Eo(this,e,t,!1,n)};m.prototype.copy=function(e,t,n,i){if(!m.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};m.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!m.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if(typeof e=="number")for(s=t;s<n;++s)this[s]=e;else{var a=m.isBuffer(e)?e:m.from(e,i),u=a.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=a[s%u]}return this};var Vu=/[^+/0-9A-Za-z-_]/g;function Yu(r){if(r=r.split("=")[0],r=r.trim().replace(Vu,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Bn(r,e){e=e||1/0;for(var t,n=r.length,i=null,o=[],s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Xu(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Ku(r,e){for(var t,n,i,o=[],s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function vo(r){return Sn.toByteArray(Yu(r))}function tr(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function de(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function In(r){return r!==r}var Ju=function(){for(var r="0123456789abcdef",e=new Array(256),t=0;t<16;++t)for(var n=t*16,i=0;i<16;++i)e[n+i]=r[t]+r[i];return e}()});var An=B(()=>{l()});var Mo=B((wp,Co)=>{"use strict";l();function So(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function To(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?So(Object(t),!0).forEach(function(n){Qu(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):So(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Qu(r,e,t){return e=Bo(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Zu(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ro(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Bo(n.key),n)}}function ef(r,e,t){return e&&Ro(r.prototype,e),t&&Ro(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Bo(r){var e=tf(r,"string");return typeof e=="symbol"?e:String(e)}function tf(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var rf=Ut(),rr=rf.Buffer,nf=An(),Ln=nf.inspect,of=Ln&&Ln.custom||"inspect";function sf(r,e,t){rr.prototype.copy.call(r,e,t)}Co.exports=function(){function r(){Zu(this,r),this.head=null,this.tail=null,this.length=0}return ef(r,[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(this.length===0)return rr.alloc(0);for(var n=rr.allocUnsafe(t>>>0),i=this.head,o=0;i;)sf(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):t===this.head.data.length?i=this.shift():i=n?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,o=n.data;for(t-=o.length;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(a===s.length?o+=s:o+=s.slice(0,t),t-=a,t===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(t){var n=rr.allocUnsafe(t),i=this.head,o=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var s=i.data,a=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,a),t-=a,t===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:of,value:function(t,n){return Ln(this,To(To({},n),{},{depth:0,customInspect:!1}))}}]),r}()});var Un=B((Ep,Ao)=>{"use strict";l();function af(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process_browser.nextTick(Fn,this,r)):process_browser.nextTick(Fn,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?t._writableState?t._writableState.errorEmitted?process_browser.nextTick(nr,t):(t._writableState.errorEmitted=!0,process_browser.nextTick(Io,t,o)):process_browser.nextTick(Io,t,o):e?(process_browser.nextTick(nr,t),e(o)):process_browser.nextTick(nr,t)}),this)}function Io(r,e){Fn(r,e),nr(r)}function nr(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function uf(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Fn(r,e){r.emit("error",e)}function ff(r,e){var t=r._readableState,n=r._writableState;t&&t.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}Ao.exports={destroy:af,undestroy:uf,errorOrDestroy:ff}});var Ve=B((Sp,Uo)=>{"use strict";l();function cf(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var Fo={};function ee(r,e,t){t||(t=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}var i=function(o){cf(s,o);function s(a,u,f){return o.call(this,n(a,u,f))||this}return s}(t);i.prototype.name=t.name,i.prototype.code=r,Fo[r]=i}function Lo(r,e){if(Array.isArray(r)){var t=r.length;return r=r.map(function(n){return String(n)}),t>2?"one of ".concat(e," ").concat(r.slice(0,t-1).join(", "),", or ")+r[t-1]:t===2?"one of ".concat(e," ").concat(r[0]," or ").concat(r[1]):"of ".concat(e," ").concat(r[0])}else return"of ".concat(e," ").concat(String(r))}function lf(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function pf(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function df(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}ee("ERR_INVALID_OPT_VALUE",function(r,e){return'The value "'+e+'" is invalid for option "'+r+'"'},TypeError);ee("ERR_INVALID_ARG_TYPE",function(r,e,t){var n;typeof e=="string"&&lf(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(pf(r," argument"))i="The ".concat(r," ").concat(n," ").concat(Lo(e,"type"));else{var o=df(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(o," ").concat(n," ").concat(Lo(e,"type"))}return i+=". Received type ".concat(typeof t),i},TypeError);ee("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ee("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});ee("ERR_STREAM_PREMATURE_CLOSE","Premature close");ee("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});ee("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ee("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ee("ERR_STREAM_WRITE_AFTER_END","write after end");ee("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ee("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);ee("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Uo.exports.codes=Fo});var kn=B((Rp,ko)=>{"use strict";l();var hf=Ve().codes.ERR_INVALID_OPT_VALUE;function mf(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function yf(r,e,t,n){var i=mf(e,n,t);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?t:"highWaterMark";throw new hf(o,i)}return Math.floor(i)}return r.objectMode?16:16*1024}ko.exports={getHighWaterMark:yf}});var Po=B((Cp,Do)=>{l();Do.exports=gf;function gf(r,e){if(Dn("noDeprecation"))return r;var t=!1;function n(){if(!t){if(Dn("throwDeprecation"))throw new Error(e);Dn("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return r.apply(this,arguments)}return n}function Dn(r){try{if(!window.localStorage)return!1}catch(t){return!1}var e=window.localStorage[r];return e==null?!1:String(e).toLowerCase()==="true"}});var On=B((Ip,Wo)=>{"use strict";l();Wo.exports=U;function Oo(r){var e=this;this.next=null,this.entry=null,this.finish=function(){$f(e,r)}}var lt;U.WritableState=Dt;var xf={deprecate:Po()},Ho=vn(),or=Ut().Buffer,bf=(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function wf(r){return or.from(r)}function _f(r){return or.isBuffer(r)||r instanceof bf}var Nn=Un(),Ef=kn(),vf=Ef.getHighWaterMark,Me=Ve().codes,Sf=Me.ERR_INVALID_ARG_TYPE,Tf=Me.ERR_METHOD_NOT_IMPLEMENTED,Rf=Me.ERR_MULTIPLE_CALLBACK,Bf=Me.ERR_STREAM_CANNOT_PIPE,Cf=Me.ERR_STREAM_DESTROYED,Mf=Me.ERR_STREAM_NULL_VALUES,If=Me.ERR_STREAM_WRITE_AFTER_END,Af=Me.ERR_UNKNOWN_ENCODING,pt=Nn.errorOrDestroy;Ge()(U,Ho);function Lf(){}function Dt(r,e,t){lt=lt||Ye(),r=r||{},typeof t!="boolean"&&(t=e instanceof lt),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=vf(this,r,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Of(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Oo(this)}Dt.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(Dt.prototype,"buffer",{get:xf.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(r){}})();var ir;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ir=Function.prototype[Symbol.hasInstance],Object.defineProperty(U,Symbol.hasInstance,{value:function(e){return ir.call(this,e)?!0:this!==U?!1:e&&e._writableState instanceof Dt}})):ir=function(e){return e instanceof this};function U(r){lt=lt||Ye();var e=this instanceof lt;if(!e&&!ir.call(U,this))return new U(r);this._writableState=new Dt(r,this,e),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),Ho.call(this)}U.prototype.pipe=function(){pt(this,new Bf)};function Ff(r,e){var t=new If;pt(r,t),process_browser.nextTick(e,t)}function Uf(r,e,t,n){var i;return t===null?i=new Mf:typeof t!="string"&&!e.objectMode&&(i=new Sf("chunk",["string","Buffer"],t)),i?(pt(r,i),process_browser.nextTick(n,i),!1):!0}U.prototype.write=function(r,e,t){var n=this._writableState,i=!1,o=!n.objectMode&&_f(r);return o&&!or.isBuffer(r)&&(r=wf(r)),typeof e=="function"&&(t=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=Lf),n.ending?Ff(this,t):(o||Uf(this,n,r,t))&&(n.pendingcb++,i=Df(this,n,o,r,e,t)),i};U.prototype.cork=function(){this._writableState.corked++};U.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&qo(this,r))};U.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new Af(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(U.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function kf(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=or.from(e,t)),e}Object.defineProperty(U.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Df(r,e,t,n,i,o){if(!t){var s=kf(e,n,i);n!==s&&(t=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var f=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:o,next:null},f?f.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Pn(r,e,!1,a,n,i,o);return u}function Pn(r,e,t,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Cf("write")):t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function Pf(r,e,t,n,i){--e.pendingcb,t?(process_browser.nextTick(i,n),process_browser.nextTick(kt,r,e),r._writableState.errorEmitted=!0,pt(r,n)):(i(n),r._writableState.errorEmitted=!0,pt(r,n),kt(r,e))}function Nf(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function Of(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(typeof i!="function")throw new Rf;if(Nf(t),e)Pf(r,t,n,e,i);else{var o=jo(t)||r.destroyed;!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&qo(r,t),n?process_browser.nextTick(No,r,t,o,i):No(r,t,o,i)}}function No(r,e,t,n){t||Hf(r,e),e.pendingcb--,n(),kt(r,e)}function Hf(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function qo(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var s=0,a=!0;t;)i[s]=t,t.isBuf||(a=!1),t=t.next,s+=1;i.allBuffers=a,Pn(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new Oo(e),e.bufferedRequestCount=0}else{for(;t;){var u=t.chunk,f=t.encoding,p=t.callback,d=e.objectMode?1:u.length;if(Pn(r,e,!1,d,u,f,p),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}U.prototype._write=function(r,e,t){t(new Tf("_write()"))};U.prototype._writev=null;U.prototype.end=function(r,e,t){var n=this._writableState;return typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Wf(this,n,t),this};Object.defineProperty(U.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function jo(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function qf(r,e){r._final(function(t){e.pendingcb--,t&&pt(r,t),e.prefinished=!0,r.emit("prefinish"),kt(r,e)})}function jf(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process_browser.nextTick(qf,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function kt(r,e){var t=jo(e);if(t&&(jf(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"),e.autoDestroy))){var n=r._readableState;(!n||n.autoDestroy&&n.endEmitted)&&r.destroy()}return t}function Wf(r,e,t){e.ending=!0,kt(r,e),t&&(e.finished?process_browser.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function $f(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});U.prototype.destroy=Nn.destroy;U.prototype._undestroy=Nn.undestroy;U.prototype._destroy=function(r,e){e(r)}});var Ye=B((Lp,Go)=>{"use strict";l();var Gf=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};Go.exports=he;var $o=jn(),qn=On();Ge()(he,$o);for(Hn=Gf(qn.prototype),sr=0;sr<Hn.length;sr++)ar=Hn[sr],he.prototype[ar]||(he.prototype[ar]=qn.prototype[ar]);var Hn,ar,sr;function he(r){if(!(this instanceof he))return new he(r);$o.call(this,r),qn.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",zf)))}Object.defineProperty(he.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(he.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(he.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function zf(){this._writableState.ended||process_browser.nextTick(Vf,this)}function Vf(r){r.end()}Object.defineProperty(he.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Yo=B((Wn,Vo)=>{l();var ur=Ut(),me=ur.Buffer;function zo(r,e){for(var t in r)e[t]=r[t]}me.from&&me.alloc&&me.allocUnsafe&&me.allocUnsafeSlow?Vo.exports=ur:(zo(ur,Wn),Wn.Buffer=Xe);function Xe(r,e,t){return me(r,e,t)}Xe.prototype=Object.create(me.prototype);zo(me,Xe);Xe.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return me(r,e,t)};Xe.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=me(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};Xe.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return me(r)};Xe.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return ur.SlowBuffer(r)}});var zn=B(Ko=>{"use strict";l();var Gn=Yo().Buffer,Xo=Gn.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Yf(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function Xf(r){var e=Yf(r);if(typeof e!="string"&&(Gn.isEncoding===Xo||!Xo(r)))throw new Error("Unknown encoding: "+r);return e||r}Ko.StringDecoder=Pt;function Pt(r){this.encoding=Xf(r);var e;switch(this.encoding){case"utf16le":this.text=tc,this.end=rc,e=4;break;case"utf8":this.fillLast=Qf,e=4;break;case"base64":this.text=nc,this.end=ic,e=3;break;default:this.write=oc,this.end=sc;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Gn.allocUnsafe(e)}Pt.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};Pt.prototype.end=ec;Pt.prototype.text=Zf;Pt.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function $n(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function Kf(r,e,t){var n=e.length-1;if(n<t)return 0;var i=$n(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=$n(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=$n(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function Jf(r,e,t){if((e[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function Qf(r){var e=this.lastTotal-this.lastNeed,t=Jf(this,r,e);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function Zf(r,e){var t=Kf(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function ec(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function tc(r,e){if((r.length-e)%2===0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function rc(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function nc(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function ic(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function oc(r){return r.toString(this.encoding)}function sc(r){return r&&r.length?this.write(r):""}});var fr=B((Pp,Zo)=>{"use strict";l();var Jo=Ve().codes.ERR_STREAM_PREMATURE_CLOSE;function ac(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(this,n)}}}function uc(){}function fc(r){return r.setHeader&&typeof r.abort=="function"}function Qo(r,e,t){if(typeof e=="function")return Qo(r,null,e);e||(e={}),t=ac(t||uc);var n=e.readable||e.readable!==!1&&r.readable,i=e.writable||e.writable!==!1&&r.writable,o=function(){r.writable||a()},s=r._writableState&&r._writableState.finished,a=function(){i=!1,s=!0,n||t.call(r)},u=r._readableState&&r._readableState.endEmitted,f=function(){n=!1,u=!0,i||t.call(r)},p=function(_){t.call(r,_)},d=function(){var _;if(n&&!u)return(!r._readableState||!r._readableState.ended)&&(_=new Jo),t.call(r,_);if(i&&!s)return(!r._writableState||!r._writableState.ended)&&(_=new Jo),t.call(r,_)},y=function(){r.req.on("finish",a)};return fc(r)?(r.on("complete",a),r.on("abort",d),r.req?y():r.on("request",y)):i&&!r._writableState&&(r.on("end",o),r.on("close",o)),r.on("end",f),r.on("finish",a),e.error!==!1&&r.on("error",p),r.on("close",d),function(){r.removeListener("complete",a),r.removeListener("abort",d),r.removeListener("request",y),r.req&&r.req.removeListener("finish",a),r.removeListener("end",o),r.removeListener("close",o),r.removeListener("finish",a),r.removeListener("end",f),r.removeListener("error",p),r.removeListener("close",d)}}Zo.exports=Qo});var ts=B((Op,es)=>{"use strict";l();var cr;function Ie(r,e,t){return e=cc(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cc(r){var e=lc(r,"string");return typeof e=="symbol"?e:String(e)}function lc(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var pc=fr(),Ae=Symbol("lastResolve"),Ke=Symbol("lastReject"),Nt=Symbol("error"),lr=Symbol("ended"),Je=Symbol("lastPromise"),Vn=Symbol("handlePromise"),Qe=Symbol("stream");function Le(r,e){return{value:r,done:e}}function dc(r){var e=r[Ae];if(e!==null){var t=r[Qe].read();t!==null&&(r[Je]=null,r[Ae]=null,r[Ke]=null,e(Le(t,!1)))}}function hc(r){process_browser.nextTick(dc,r)}function mc(r,e){return function(t,n){r.then(function(){if(e[lr]){t(Le(void 0,!0));return}e[Vn](t,n)},n)}}var yc=Object.getPrototypeOf(function(){}),gc=Object.setPrototypeOf((cr={get stream(){return this[Qe]},next:function(){var e=this,t=this[Nt];if(t!==null)return Promise.reject(t);if(this[lr])return Promise.resolve(Le(void 0,!0));if(this[Qe].destroyed)return new Promise(function(s,a){process_browser.nextTick(function(){e[Nt]?a(e[Nt]):s(Le(void 0,!0))})});var n=this[Je],i;if(n)i=new Promise(mc(n,this));else{var o=this[Qe].read();if(o!==null)return Promise.resolve(Le(o,!1));i=new Promise(this[Vn])}return this[Je]=i,i}},Ie(cr,Symbol.asyncIterator,function(){return this}),Ie(cr,"return",function(){var e=this;return new Promise(function(t,n){e[Qe].destroy(null,function(i){if(i){n(i);return}t(Le(void 0,!0))})})}),cr),yc),xc=function(e){var t,n=Object.create(gc,(t={},Ie(t,Qe,{value:e,writable:!0}),Ie(t,Ae,{value:null,writable:!0}),Ie(t,Ke,{value:null,writable:!0}),Ie(t,Nt,{value:null,writable:!0}),Ie(t,lr,{value:e._readableState.endEmitted,writable:!0}),Ie(t,Vn,{value:function(o,s){var a=n[Qe].read();a?(n[Je]=null,n[Ae]=null,n[Ke]=null,o(Le(a,!1))):(n[Ae]=o,n[Ke]=s)},writable:!0}),t));return n[Je]=null,pc(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[Ke];o!==null&&(n[Je]=null,n[Ae]=null,n[Ke]=null,o(i)),n[Nt]=i;return}var s=n[Ae];s!==null&&(n[Je]=null,n[Ae]=null,n[Ke]=null,s(Le(void 0,!0))),n[lr]=!0}),e.on("readable",hc.bind(null,n)),n};es.exports=xc});var ns=B((qp,rs)=>{l();rs.exports=function(){throw new Error("Readable.from is not available in the browser")}});var jn=B(($p,ds)=>{"use strict";l();ds.exports=S;var dt;S.ReadableState=as;var Wp=Zt().EventEmitter,ss=function(e,t){return e.listeners(t).length},Ht=vn(),pr=Ut().Buffer,bc=(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function wc(r){return pr.from(r)}function _c(r){return pr.isBuffer(r)||r instanceof bc}var Yn=An(),v;Yn&&Yn.debuglog?v=Yn.debuglog("stream"):v=function(){};var Ec=Mo(),ti=Un(),vc=kn(),Sc=vc.getHighWaterMark,dr=Ve().codes,Tc=dr.ERR_INVALID_ARG_TYPE,Rc=dr.ERR_STREAM_PUSH_AFTER_EOF,Bc=dr.ERR_METHOD_NOT_IMPLEMENTED,Cc=dr.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ht,Xn,Kn;Ge()(S,Ht);var Ot=ti.errorOrDestroy,Jn=["error","close","destroy","pause","resume"];function Mc(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function as(r,e,t){dt=dt||Ye(),r=r||{},typeof t!="boolean"&&(t=e instanceof dt),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=Sc(this,r,"readableHighWaterMark",t),this.buffer=new Ec,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(ht||(ht=zn().StringDecoder),this.decoder=new ht(r.encoding),this.encoding=r.encoding)}function S(r){if(dt=dt||Ye(),!(this instanceof S))return new S(r);var e=this instanceof dt;this._readableState=new as(r,this,e),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),Ht.call(this)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});S.prototype.destroy=ti.destroy;S.prototype._undestroy=ti.undestroy;S.prototype._destroy=function(r,e){e(r)};S.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=pr.from(r,e),e=""),n=!0),us(this,r,e,!1,n)};S.prototype.unshift=function(r){return us(this,r,null,!0,!1)};function us(r,e,t,n,i){v("readableAddChunk",e);var o=r._readableState;if(e===null)o.reading=!1,Lc(r,o);else{var s;if(i||(s=Ic(o,e)),s)Ot(r,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==pr.prototype&&(e=wc(e)),n)o.endEmitted?Ot(r,new Cc):Qn(r,o,e,!0);else if(o.ended)Ot(r,new Rc);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!t?(e=o.decoder.write(e),o.objectMode||e.length!==0?Qn(r,o,e,!1):ei(r,o)):Qn(r,o,e,!1)}else n||(o.reading=!1,ei(r,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function Qn(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,r.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&hr(r)),ei(r,e)}function Ic(r,e){var t;return!_c(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new Tc("chunk",["string","Buffer","Uint8Array"],e)),t}S.prototype.isPaused=function(){return this._readableState.flowing===!1};S.prototype.setEncoding=function(r){ht||(ht=zn().StringDecoder);var e=new ht(r);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var is=1073741824;function Ac(r){return r>=is?r=is:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function os(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=Ac(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}S.prototype.read=function(r){v("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return v("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Zn(this):hr(this),null;if(r=os(r,e),r===0&&e.ended)return e.length===0&&Zn(this),null;var n=e.needReadable;v("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,v("length less than watermark",n)),e.ended||e.reading?(n=!1,v("reading or ended",n)):n&&(v("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=os(t,e)));var i;return r>0?i=ls(r,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,r=0):(e.length-=r,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&Zn(this)),i!==null&&this.emit("data",i),i};function Lc(r,e){if(v("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?hr(r):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,fs(r)))}}function hr(r){var e=r._readableState;v("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(v("emitReadable",e.flowing),e.emittedReadable=!0,process_browser.nextTick(fs,r))}function fs(r){var e=r._readableState;v("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(r.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,ri(r)}function ei(r,e){e.readingMore||(e.readingMore=!0,process_browser.nextTick(Fc,r,e))}function Fc(r,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(v("maybeReadMore read 0"),r.read(0),t===e.length)break}e.readingMore=!1}S.prototype._read=function(r){Ot(this,new Bc("_read()"))};S.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,v("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==process_browser.stdout&&r!==process_browser.stderr,o=i?a:b;n.endEmitted?process_browser.nextTick(o):t.once("end",o),r.on("unpipe",s);function s(E,w){v("onunpipe"),E===t&&w&&w.hasUnpiped===!1&&(w.hasUnpiped=!0,p())}function a(){v("onend"),r.end()}var u=Uc(t);r.on("drain",u);var f=!1;function p(){v("cleanup"),r.removeListener("close",g),r.removeListener("finish",_),r.removeListener("drain",u),r.removeListener("error",y),r.removeListener("unpipe",s),t.removeListener("end",a),t.removeListener("end",b),t.removeListener("data",d),f=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&u()}t.on("data",d);function d(E){v("ondata");var w=r.write(E);v("dest.write",w),w===!1&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&ps(n.pipes,r)!==-1)&&!f&&(v("false write response, pause",n.awaitDrain),n.awaitDrain++),t.pause())}function y(E){v("onerror",E),b(),r.removeListener("error",y),ss(r,"error")===0&&Ot(r,E)}Mc(r,"error",y);function g(){r.removeListener("finish",_),b()}r.once("close",g);function _(){v("onfinish"),r.removeListener("close",g),b()}r.once("finish",_);function b(){v("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(v("pipe resume"),t.resume()),r};function Uc(r){return function(){var t=r._readableState;v("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&ss(r,"data")&&(t.flowing=!0,ri(r))}}S.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=ps(e.pipes,r);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};S.prototype.on=function(r,e){var t=Ht.prototype.on.call(this,r,e),n=this._readableState;return r==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):r==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,v("on readable",n.length,n.reading),n.length?hr(this):n.reading||process_browser.nextTick(kc,this)),t};S.prototype.addListener=S.prototype.on;S.prototype.removeListener=function(r,e){var t=Ht.prototype.removeListener.call(this,r,e);return r==="readable"&&process_browser.nextTick(cs,this),t};S.prototype.removeAllListeners=function(r){var e=Ht.prototype.removeAllListeners.apply(this,arguments);return(r==="readable"||r===void 0)&&process_browser.nextTick(cs,this),e};function cs(r){var e=r._readableState;e.readableListening=r.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:r.listenerCount("data")>0&&r.resume()}function kc(r){v("readable nexttick read 0"),r.read(0)}S.prototype.resume=function(){var r=this._readableState;return r.flowing||(v("resume"),r.flowing=!r.readableListening,Dc(this,r)),r.paused=!1,this};function Dc(r,e){e.resumeScheduled||(e.resumeScheduled=!0,process_browser.nextTick(Pc,r,e))}function Pc(r,e){v("resume",e.reading),e.reading||r.read(0),e.resumeScheduled=!1,r.emit("resume"),ri(r),e.flowing&&!e.reading&&r.read(0)}S.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ri(r){var e=r._readableState;for(v("flow",e.flowing);e.flowing&&r.read()!==null;);}S.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(v("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),r.on("data",function(s){if(v("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=function(a){return function(){return r[a].apply(r,arguments)}}(i));for(var o=0;o<Jn.length;o++)r.on(Jn[o],this.emit.bind(this,Jn[o]));return this._read=function(s){v("wrapped _read",s),n&&(n=!1,r.resume())},this};typeof Symbol=="function"&&(S.prototype[Symbol.asyncIterator]=function(){return Xn===void 0&&(Xn=ts()),Xn(this)});Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});S._fromList=ls;Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ls(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.first():t=e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(r,e.decoder),t}function Zn(r){var e=r._readableState;v("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process_browser.nextTick(Nc,e,r))}function Nc(r,e){if(v("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"),r.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}typeof Symbol=="function"&&(S.from=function(r,e){return Kn===void 0&&(Kn=ns()),Kn(S,r,e)});function ps(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var ni=B((zp,ms)=>{"use strict";l();ms.exports=Se;var mr=Ve().codes,Oc=mr.ERR_METHOD_NOT_IMPLEMENTED,Hc=mr.ERR_MULTIPLE_CALLBACK,qc=mr.ERR_TRANSFORM_ALREADY_TRANSFORMING,jc=mr.ERR_TRANSFORM_WITH_LENGTH_0,yr=Ye();Ge()(Se,yr);function Wc(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(n===null)return this.emit("error",new Hc);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Se(r){if(!(this instanceof Se))return new Se(r);yr.call(this,r),this._transformState={afterTransform:Wc.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",$c)}function $c(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){hs(r,e,t)}):hs(this,null,null)}Se.prototype.push=function(r,e){return this._transformState.needTransform=!1,yr.prototype.push.call(this,r,e)};Se.prototype._transform=function(r,e,t){t(new Oc("_transform()"))};Se.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Se.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Se.prototype._destroy=function(r,e){yr.prototype._destroy.call(this,r,function(t){e(t)})};function hs(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new jc;if(r._transformState.transforming)throw new qc;return r.push(null)}});var xs=B((Yp,gs)=>{"use strict";l();gs.exports=qt;var ys=ni();Ge()(qt,ys);function qt(r){if(!(this instanceof qt))return new qt(r);ys.call(this,r)}qt.prototype._transform=function(r,e,t){t(null,r)}});var vs=B((Kp,Es)=>{"use strict";l();var ii;function Gc(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var _s=Ve().codes,zc=_s.ERR_MISSING_ARGS,Vc=_s.ERR_STREAM_DESTROYED;function bs(r){if(r)throw r}function Yc(r){return r.setHeader&&typeof r.abort=="function"}function Xc(r,e,t,n){n=Gc(n);var i=!1;r.on("close",function(){i=!0}),ii===void 0&&(ii=fr()),ii(r,{readable:e,writable:t},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,Yc(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();n(s||new Vc("pipe"))}}}function ws(r){r()}function Kc(r,e){return r.pipe(e)}function Jc(r){return!r.length||typeof r[r.length-1]!="function"?bs:r.pop()}function Qc(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=Jc(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new zc("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,f=a>0;return Xc(s,u,f,function(p){i||(i=p),p&&o.forEach(ws),!u&&(o.forEach(ws),n(i))})});return e.reduce(Kc)}Es.exports=Qc});var j=B((Qp,Ss)=>{l();Ss.exports=te;var oi=Zt().EventEmitter,Zc=Ge();Zc(te,oi);te.Readable=jn();te.Writable=On();te.Duplex=Ye();te.Transform=ni();te.PassThrough=xs();te.finished=fr();te.pipeline=vs();te.Stream=te;function te(){oi.call(this)}te.prototype.pipe=function(r,e){var t=this;function n(p){r.writable&&r.write(p)===!1&&t.pause&&t.pause()}t.on("data",n);function i(){t.readable&&t.resume&&t.resume()}r.on("drain",i),!r._isStdio&&(!e||e.end!==!1)&&(t.on("end",s),t.on("close",a));var o=!1;function s(){o||(o=!0,r.end())}function a(){o||(o=!0,typeof r.destroy=="function"&&r.destroy())}function u(p){if(f(),oi.listenerCount(this,"error")===0)throw p}t.on("error",u),r.on("error",u);function f(){t.removeListener("data",n),r.removeListener("drain",i),t.removeListener("end",s),t.removeListener("close",a),t.removeListener("error",u),r.removeListener("error",u),t.removeListener("end",f),t.removeListener("close",f),r.removeListener("close",f)}return t.on("end",f),t.on("close",f),r.on("close",f),r.emit("pipe",t),r}});var Us=B((Zd,Fs)=>{l();var xt=1e3,bt=xt*60,wt=bt*60,et=wt*24,rl=et*7,nl=et*365.25;Fs.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return il(r);if(t==="number"&&isFinite(r))return e.long?sl(r):ol(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function il(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*nl;case"weeks":case"week":case"w":return t*rl;case"days":case"day":case"d":return t*et;case"hours":case"hour":case"hrs":case"hr":case"h":return t*wt;case"minutes":case"minute":case"mins":case"min":case"m":return t*bt;case"seconds":case"second":case"secs":case"sec":case"s":return t*xt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function ol(r){var e=Math.abs(r);return e>=et?Math.round(r/et)+"d":e>=wt?Math.round(r/wt)+"h":e>=bt?Math.round(r/bt)+"m":e>=xt?Math.round(r/xt)+"s":r+"ms"}function sl(r){var e=Math.abs(r);return e>=et?Er(r,e,et,"day"):e>=wt?Er(r,e,wt,"hour"):e>=bt?Er(r,e,bt,"minute"):e>=xt?Er(r,e,xt,"second"):r+" ms"}function Er(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Ds=B((th,ks)=>{l();function al(r){t.debug=t,t.default=t,t.coerce=u,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Us(),t.destroy=f,Object.keys(r).forEach(p=>{t[p]=r[p]}),t.names=[],t.skips=[],t.formatters={};function e(p){let d=0;for(let y=0;y<p.length;y++)d=(d<<5)-d+p.charCodeAt(y),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(p){let d,y=null,g,_;function b(...E){if(!b.enabled)return;let w=b,T=Number(new Date),X=T-(d||T);w.diff=X,w.prev=d,w.curr=T,d=T,E[0]=t.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let P=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(ue,rt)=>{if(ue==="%%")return"%";P++;let He=t.formatters[rt];if(typeof He=="function"){let qe=E[P];ue=He.call(w,qe),E.splice(P,1),P--}return ue}),t.formatArgs.call(w,E),(w.log||t.log).apply(w,E)}return b.namespace=p,b.useColors=t.useColors(),b.color=t.selectColor(p),b.extend=n,b.destroy=t.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(g!==t.namespaces&&(g=t.namespaces,_=t.enabled(p)),_),set:E=>{y=E}}),typeof t.init=="function"&&t.init(b),b}function n(p,d){let y=t(this.namespace+(typeof d=="undefined"?":":d)+p);return y.log=this.log,y}function i(p){t.save(p),t.namespaces=p,t.names=[],t.skips=[];let d,y=(typeof p=="string"?p:"").split(/[\s,]+/),g=y.length;for(d=0;d<g;d++)y[d]&&(p=y[d].replace(/\*/g,".*?"),p[0]==="-"?t.skips.push(new RegExp("^"+p.slice(1)+"$")):t.names.push(new RegExp("^"+p+"$")))}function o(){let p=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),p}function s(p){if(p[p.length-1]==="*")return!0;let d,y;for(d=0,y=t.skips.length;d<y;d++)if(t.skips[d].test(p))return!1;for(d=0,y=t.names.length;d<y;d++)if(t.names[d].test(p))return!0;return!1}function a(p){return p.toString().substring(2,p.toString().length-2).replace(/\.\*\?$/,"*")}function u(p){return p instanceof Error?p.stack||p.message:p}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}ks.exports=al});var be=B((V,vr)=>{l();V.formatArgs=fl;V.save=cl;V.load=ll;V.useColors=ul;V.storage=pl();V.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();V.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ul(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function fl(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+vr.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}V.log=console.debug||console.log||(()=>{});function cl(r){try{r?V.storage.setItem("debug",r):V.storage.removeItem("debug")}catch(e){}}function ll(){let r;try{r=V.storage.getItem("debug")}catch(e){}return!r&&typeof process_browser!="undefined"&&"env"in process_browser&&(r=process_browser.env.DEBUG),r}function pl(){try{return localStorage}catch(r){}}vr.exports=Ds()(V);var{formatters:dl}=vr.exports;dl.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Jl={};zt(Jl,{AACDepay:()=>yt,BasicDepay:()=>br,CanvasSink:()=>gt,H264Depay:()=>_t,Html5CanvasPipeline:()=>Zr,Html5VideoMetadataPipeline:()=>en,Html5VideoPipeline:()=>At,HttpMsePipeline:()=>on,HttpSource:()=>Tr,Inspector:()=>Rr,JPEGDepay:()=>Et,MessageType:()=>F,MetadataPipeline:()=>tn,Mp4Capture:()=>Cr,Mp4Muxer:()=>St,MseSink:()=>De,ONVIFDepay:()=>Pe,Pipeline:()=>Ne,RTCPPacketType:()=>yi,RTSPResponseError:()=>$t,RTSP_METHOD:()=>Xr,RtspMjpegPipeline:()=>Mt,RtspMp4Pipeline:()=>It,RtspParser:()=>Rt,RtspPipeline:()=>ie,RtspSession:()=>Ct,SDESItem:()=>xi,SR:()=>pa,Scheduler:()=>Ze,Sink:()=>ge,Source:()=>oe,Tube:()=>M,WSSource:()=>ne,WsSdpPipeline:()=>rn,addRTSPRetry:()=>Aa,bodyOffset:()=>Wr,cSrc:()=>Ms,cSrcCount:()=>Ue,components:()=>_i,connectionEnded:()=>qr,contentBase:()=>Or,contentLocation:()=>Hr,createTransform:()=>Re,extHeader:()=>Is,extHeaderLength:()=>jt,extension:()=>xr,extractHeaderValue:()=>ae,extractURIs:()=>va,getTime:()=>Vr,isRtcpApp:()=>ya,isRtcpBye:()=>Ur,isRtcpRR:()=>ha,isRtcpSDES:()=>ma,isRtcpSR:()=>Fr,marker:()=>xe,messageFromBuffer:()=>Gr,padding:()=>Rs,parse:()=>bi,parseRtcp:()=>gi,payload:()=>re,payloadType:()=>N,pipelines:()=>vi,range:()=>jr,rtcpMessageFromBuffer:()=>Lr,sSrc:()=>Cs,sequence:()=>Dr,sequenceNumber:()=>Bs,sessionId:()=>Pr,sessionTimeout:()=>Nr,statusCode:()=>Tt,timestamp:()=>W,utils:()=>Si,version:()=>Ts});l();var _i={};zt(_i,{AACDepay:()=>yt,BasicDepay:()=>br,CanvasSink:()=>gt,H264Depay:()=>_t,HttpSource:()=>Tr,Inspector:()=>Rr,JPEGDepay:()=>Et,MessageType:()=>F,Mp4Capture:()=>Cr,Mp4Muxer:()=>St,MseSink:()=>De,ONVIFDepay:()=>Pe,RTSPResponseError:()=>$t,RTSP_METHOD:()=>Xr,RtspParser:()=>Rt,RtspSession:()=>Ct,Sink:()=>ge,Source:()=>oe,Tube:()=>M,WSSource:()=>ne,createTransform:()=>Re});l();l();var Te=A(j());l();var Fe=A(j()),ye=class{static consumer(e=()=>{}){return new Fe.Writable({objectMode:!0,write(t,n,i){e(t),i()}})}static peeker(e){if(typeof e!="function")throw new Error("you must supply a function");return new Fe.Transform({objectMode:!0,transform(t,n,i){e(t),i(void 0,t)}})}static producer(e){let t=0;return new Fe.Readable({objectMode:!0,read(){e!==void 0&&(t<e.length?this.push(e[t++]):this.push(null))}})}static recorder(e,t){return new Fe.Transform({objectMode:!0,transform(n,i,o){let s=Date.now(),a=Object.assign({},n,{data:n.data.toString("base64")});t.write(JSON.stringify({type:e,timestamp:s,message:a},null,2)),t.write(`,
`),o(void 0,n)}})}static replayer(e){let t=0,n=e[0].timestamp;return new Fe.Readable({objectMode:!0,read(){let i=e[t++];if(i){let{type:o,timestamp:s,message:a}=i,u=s-n;if(n=s,a){let f=a.data?Buffer.from(a.data,"base64"):Buffer.alloc(0),p=Object.assign({},a,{data:f});this.push({type:o,delay:u,msg:p})}else this.push({type:o,delay:u,msg:null})}else this.push(null)}})}};var gr=class{constructor(){c(this,"_incomingErrorHandler");c(this,"_outgoingErrorHandler")}},oe=class r extends gr{constructor(t=new Te.Readable({objectMode:!0}),n=new Te.Writable({objectMode:!0})){super();c(this,"incoming");c(this,"outgoing");c(this,"next");c(this,"prev");this.incoming=t,this.outgoing=n,this.next=null,this.prev=null}static fromMessages(t){return new r(ye.producer(t),ye.consumer())}connect(t){if(t===null)return this;if(this.next!==null||t.prev!==null)throw new Error("connection failed: component(s) already connected");if(!this.incoming.readable||!this.outgoing.writable)throw new Error("connection failed: this component not compatible");if(!t.incoming.writable||!t.outgoing.readable)throw new Error("connection failed: next component not compatible");try{this.incoming.pipe(t.incoming),t.outgoing.pipe(this.outgoing)}catch(o){throw new Error(`connection failed: ${o.message}`)}let n=o=>{this.incoming.emit("error",o)};t.incoming.on("error",n);let i=o=>{t.outgoing.emit("error",o)};return this.outgoing.on("error",i),this.next=t,t.prev=this,this._incomingErrorHandler=n,this._outgoingErrorHandler=i,t}disconnect(){let t=this.next;return t!==null&&(this.incoming.unpipe(t.incoming),t.outgoing.unpipe(this.outgoing),typeof this._incomingErrorHandler!="undefined"&&t.incoming.removeListener("error",this._incomingErrorHandler),typeof this._outgoingErrorHandler!="undefined"&&this.outgoing.removeListener("error",this._outgoingErrorHandler),this.next=null,t.prev=null,delete this._incomingErrorHandler,delete this._outgoingErrorHandler),this}},M=class r extends oe{constructor(t=new Te.PassThrough({objectMode:!0}),n=new Te.PassThrough({objectMode:!0})){super(t,n);c(this,"incoming");c(this,"outgoing");this.incoming=t,this.outgoing=n}static fromHandlers(t,n){let i=t?ye.peeker(t):void 0,o=n?ye.peeker(n):void 0;return new r(i,o)}},ge=class r extends gr{constructor(t=new Te.Writable({objectMode:!0}),n=new Te.Readable({objectMode:!0})){super();c(this,"incoming");c(this,"outgoing");c(this,"next");c(this,"prev");this.incoming=t,this.outgoing=n,this.next=null,this.prev=null}static fromHandler(t){let n=new r(ye.consumer(t),ye.producer(void 0));return n.incoming.on("finish",()=>{n.outgoing.push(null)}),n}connect(){throw new Error("connection failed: attempting to connect after a sink")}disconnect(){return this}};l();l();l();var mt=[128,64,32,16,8,4,2,1];var Ts=r=>r[0]>>>6,Rs=r=>!!(r[0]&mt[2]),xr=r=>!!(r[0]&mt[3]),Ue=r=>r[0]&15,xe=r=>!!(r[1]&mt[0]),N=r=>r[1]&127,Bs=r=>r.readUInt16BE(2),W=r=>r.readUInt32BE(4),Cs=r=>r.readUInt32BE(8),Ms=(r,e=0)=>Ue(r)>e?r.readUInt32BE(12+e*4):0,jt=r=>xr(r)?r.readUInt16BE(12+Ue(r)*4+2):0,Is=r=>jt(r)===0?Buffer.from([]):r.slice(12+Ue(r)*4,12+Ue(r)*4+4+jt(r)*4),re=r=>xr(r)?r.slice(12+Ue(r)*4+4+jt(r)*4):r.slice(12+Ue(r)*4);l();var F=(d=>(d[d.UNKNOWN=0]="UNKNOWN",d[d.RAW=1]="RAW",d[d.RTP=2]="RTP",d[d.RTCP=3]="RTCP",d[d.RTSP=4]="RTSP",d[d.SDP=5]="SDP",d[d.ELEMENTARY=6]="ELEMENTARY",d[d.H264=7]="H264",d[d.ISOM=8]="ISOM",d[d.XML=9]="XML",d[d.JPEG=10]="JPEG",d))(F||{});l();var As=A(j()),Re=r=>new As.Transform({objectMode:!0,transform:r});l();function Ls(r,e,t){let n=re(r.data),i=0;if(e){let s=n.readUInt16BE(0);i=2+(s+s%8)/8}let o={type:6,data:n.slice(i),payloadType:N(r.data),timestamp:W(r.data),ntpTimestamp:r.ntpTimestamp};t(o)}var yt=class extends M{constructor(){let e,t,n=Re(function(i,o,s){if(i.type===5){let a;for(let u of i.sdp.media)u.type==="audio"&&u.fmtp&&u.fmtp.parameters&&u.fmtp.parameters.mode==="AAC-hbr"&&(a=u);if(a&&a.rtpmap!==void 0){e=Number(a.rtpmap.payloadType);let u=a.fmtp.parameters,f=Number(u.sizelength)||0,p=Number(u.indexlength)||0,d=Number(u.indexdeltalength)||0,y=Number(u.ctsdeltalength)||0,g=Number(u.dtsdeltalength)||0,_=Number(u.randomaccessindication)||0,b=Number(u.streamstateindication)||0,E=Number(u.auxiliarydatasizelength)||0;t=f+Math.max(p,d)+y+g+_+b+E>0}s(void 0,i)}else i.type===2&&N(i.data)===e?(Ls(i,t,this.push.bind(this)),s()):s(void 0,i)});super(n)}};l();var br=class extends M{constructor(e){if(e===void 0)throw new Error("you must supply a payload type to BasicDepayComponent");let t=Buffer.alloc(0),n=Re(function(i,o,s){if(i.type===2&&N(i.data)===e){let a=re(i.data);t=Buffer.concat([t,a]),xe(i.data)&&(t.length>0&&this.push({data:t,timestamp:W(i.data),ntpTimestamp:i.ntpTimestamp,payloadType:N(i.data),type:6}),t=Buffer.alloc(0)),s()}else s(void 0,i)});super(n)}};l();var _r=A(j());l();var wr=class{constructor(){c(this,"started");c(this,"stopped");c(this,"elapsed");this.elapsed=0,this.started=0,this.stopped=!0}start(){this.stopped&&(this.started=window.performance.now(),this.stopped=!1)}stop(){this.stopped||(this.elapsed=this.now(),this.stopped=!0)}reset(){this.elapsed=0,this.started=0,this.stopped=!0}now(){return this.stopped?this.elapsed:this.elapsed+(window.performance.now()-this.started)}play(){this.start()}pause(){this.stop()}get currentTime(){return this.now()/1e3}};l();var Ze=class{constructor(e,t,n=10){c(this,"_clock");c(this,"_handler");c(this,"_tolerance");c(this,"_nextRun");c(this,"_nextPlay");c(this,"_fifo");c(this,"_ntpPresentationTime");c(this,"_suspended");this._clock=e,this._handler=t,this._tolerance=n,this._nextRun=0,this._nextPlay=0,this._fifo=[],this._ntpPresentationTime=0,this._suspended=!1}reset(){clearTimeout(this._nextRun),clearTimeout(this._nextPlay),this._fifo=[],this._ntpPresentationTime=0,this._suspended=!1}init(e){this._ntpPresentationTime=e}suspend(){clearTimeout(this._nextPlay),this._suspended=!0}resume(){this._suspended=!1,this.run(void 0)}run(e){if(clearTimeout(this._nextRun),typeof this._ntpPresentationTime=="undefined"||(typeof e!="undefined"&&this._fifo.push(e),this._suspended)||this._fifo.length===0)return;let t=0,n;do{let i=this._fifo.shift();if(i===void 0)throw new Error("internal error: message should never be undefined");n=i;let o=n.ntpTimestamp;if(o===void 0)continue;t=o-this._ntpPresentationTime-this._clock.currentTime*1e3,Math.abs(t)<this._tolerance&&this._handler&&this._handler(n)}while(t<this._tolerance&&this._fifo.length>0);t<-this._tolerance?(clearTimeout(this._nextPlay),this._clock.pause(),this._nextPlay=window.setTimeout(()=>this._clock.play(),-t)):t>this._tolerance&&(this._fifo.unshift(n),this._nextRun=window.setTimeout(()=>this.run(void 0),t))}};var el=r=>{r.bitrate=0,r.framerate=0,r.renderedFrames=0},tl=r=>{let e=0,t=0,n=0;return(i,{byteLength:o,duration:s})=>{if(e+=o,t+=s,n++,t>=r){let a=8*e,u=n,f=t/r;i.bitrate=a/f,i.framerate=u/f,e=0,t=0,n=0}}},gt=class extends ge{constructor(t){if(t===void 0)throw new Error("canvas element argument missing");let n=0,i=0,o=0,s={bitrate:0,framerate:0,renderedFrames:0},a,u=null;window.createImageBitmap!==void 0&&(u=t.getContext("bitmaprenderer")),u===null&&(u=t.getContext("2d"));let f;if(u===null)f=()=>{};else if("transferFromImageBitmap"in u){let w=u;f=({blob:T})=>{s.renderedFrames++,window.createImageBitmap(T).then(X=>{w.transferFromImageBitmap(X)}).catch(()=>{})}}else{let w=u,T=new Image;T.onload=()=>{w.drawImage(T,0,0)},f=({blob:X})=>{s.renderedFrames++;let P=window.URL.createObjectURL(X);T.src=P}}let p=new wr,d=new Ze(p,f),y=0,g=()=>{this.onCanplay&&this.onCanplay()},_=w=>{this.onSync&&this.onSync(w)},b=new _r.Writable({objectMode:!0,write:(w,T,X)=>{if(w.type===5){p.reset(),d.reset(),n=0;let P=w.sdp.media.find(K=>K.type==="video"&&K.rtpmap!==void 0&&K.rtpmap.encodingName==="JPEG");P!==void 0&&P.rtpmap!==void 0&&(o=P.rtpmap.clockrate,el(s),a=tl(o)),X()}else if(w.type===10){let{timestamp:P,ntpTimestamp:K}=w;if(!n){n=P,i=P;let{width:He,height:qe}=w.framesize;t.width=He,t.height=qe,d.init(0)}let ue=1e3*(P-n)/o,rt=new window.Blob([w.data],{type:"image/jpeg"});!y&&K&&(y=K-ue,_(y)),d.run({ntpTimestamp:ue,blob:rt}),P===n&&g(),a(s,{byteLength:w.data.length,duration:P-i}),i=P,X()}else X()}}),E=new _r.Readable({objectMode:!0,read(){}});E.on("error",()=>{console.warn("outgoing stream broke somewhere")});super(b,E);c(this,"onCanplay");c(this,"onSync");c(this,"_clock");c(this,"_scheduler");c(this,"_info");this._clock=p,this._scheduler=d,this._info=s,this.onCanplay=void 0,this.onSync=void 0}get currentTime(){return this._clock.currentTime}pause(){this._scheduler.suspend(),this._clock.pause()}play(){this._clock.play(),this._scheduler.resume()}get bitrate(){return this._info.bitrate}get framerate(){return this._info.framerate}};l();var Ns=A(j());l();var Ps=A(be());var hl=(0,Ps.default)("msl:h264depay"),Sr=class{constructor(){c(this,"_buffer");this._buffer=Buffer.alloc(0)}parse(e){let t=re(e.data),n=t[0]&31;if(n===28){let i=t[0],o=t[1],s=!!(o>>7),a=o&31,u=i&224|a,f=o&64;if(s)return this._buffer=Buffer.concat([Buffer.from([0,0,0,0,u]),t.slice(2)]),null;if(f){let p=Buffer.concat([this._buffer,t.slice(2)]);p.writeUInt32BE(p.length-4,0);let d={data:p,type:7,timestamp:W(e.data),ntpTimestamp:e.ntpTimestamp,payloadType:N(e.data),nalType:a};return this._buffer=Buffer.alloc(0),d}return this._buffer=Buffer.concat([this._buffer,t.slice(2)]),null}else if((n===1||n===5)&&this._buffer.length===0){let i=Buffer.concat([Buffer.from([0,0,0,0]),t]);i.writeUInt32BE(i.length-4,0);let o={data:i,type:7,timestamp:W(e.data),ntpTimestamp:e.ntpTimestamp,payloadType:N(e.data),nalType:n};return this._buffer=Buffer.alloc(0),o}return hl(`H264depayComponent can only extract types 1,5 and 28, got ${n}`),this._buffer=Buffer.alloc(0),null}};var _t=class extends M{constructor(){let e,t=!1,n=[],i=new Sr,o=new Ns.Transform({objectMode:!0,transform(s,a,u){if(s.type===5){let f=s.sdp.media.find(p=>p.type==="video"&&p.rtpmap!==void 0&&p.rtpmap.encodingName==="H264");f!==void 0&&f.rtpmap!==void 0&&(e=f.rtpmap.payloadType),u(void 0,s)}else if(s.type===2&&N(s.data)===e){let f=xe(s.data),p=i.parse(s);if(p===null||!t&&p.nalType!==5){u();return}t=!0,n.push(p.data),f&&(this.push(Be(J({},p),{data:n.length===1?n[0]:Buffer.concat(n)})),n=[]),u()}else u(void 0,s)}});super(o)}};l();var Os=A(be()),Hs=A(j());var si=(0,Os.default)("msl:http-source"),Tr=class extends oe{constructor(t){let{uri:n,options:i}=t,o=new Hs.Readable({objectMode:!0,read(){}});o.on("error",s=>{console.warn("closing socket due to incoming error",s),this._reader&&this._reader.cancel().catch(a=>console.error(a))});super(o);c(this,"uri");c(this,"options");c(this,"length");c(this,"onHeaders");c(this,"onServerClose");c(this,"_reader");c(this,"_abortController");c(this,"_allDone");o._read=()=>{this._pull()},this.uri=n,this.options=i,this._allDone=!1}play(){if(this.uri===void 0)throw new Error("cannot start playing when there is no URI");this._abortController=new AbortController,this.length=0,fetch(this.uri,J({credentials:"include",signal:this._abortController.signal},this.options)).then(t=>{if(t.body===null)throw new Error("empty response body");this.onHeaders&&this.onHeaders(t.headers),this._reader=t.body.getReader(),this._pull()}).catch(t=>{console.error("http-source: fetch failed: ",t)})}abort(){this._reader&&this._reader.cancel().catch(t=>{console.log("http-source: cancel reader failed: ",t)}),this._abortController&&this._abortController.abort()}_isClosed(){return this._allDone}_close(){var t;this._reader=void 0,this._allDone=!0,this.incoming.push(null),(t=this.onServerClose)==null||t.call(this)}_pull(){this._reader!==void 0&&this._reader.read().then(({done:t,value:n})=>{if(t){this._isClosed()||(si("fetch completed, total downloaded: ",this.length," bytes"),this._close());return}if(n===void 0)throw new Error("expected value to be defined");if(this.length===void 0)throw new Error("expected length to be defined");this.length+=n.length;let i=Buffer.from(n);this.incoming.push({data:i,type:1})?this._pull():si("downstream back pressure: pausing read")}).catch(t=>{si("http-source: read failed: ",t),this._isClosed()||this._close()})}};l();var ai=A(j());var qs=(r,e)=>{let t=Date.now(),n=i=>{let o=Date.now();console.log(`${r}: +${o-t}ms`,i),t=o};return e===void 0?n:i=>i.type===e&&n(i)},Rr=class extends M{constructor(e){let t=qs("incoming",e),n=new ai.Transform({objectMode:!0,transform(s,a,u){t(s),u(void 0,s)}}),i=qs("outgoing",e),o=new ai.Transform({objectMode:!0,transform(s,a,u){i(s),u(void 0,s)}});super(n,o)}};l();var na=A(j());l();l();function Ks(){return Buffer.from([255,216])}function Js(r,e){let t=r&1?128:64,n=r&2?128:64;if(e.length!==t+n)throw new Error("invalid quantization table");let i=Buffer.from([255,219,0,t+3,0]),o=Buffer.from([255,219,0,n+3,1]);return Buffer.concat([i,e.slice(0,t),o,e.slice(t)])}function Qs(r,e,t){return Buffer.from([255,192,0,17,8,e>>8,e,r>>8,r,3,0,t===0?33:34,0,1,17,1,2,17,1])}var js=[0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ws=[0,1,2,3,4,5,6,7,8,9,10,11],$s=[0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Gs=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],zs=[0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Vs=[0,1,2,3,4,5,6,7,8,9,10,11],Ys=[0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Xs=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Zs(){let r=[[255,196,0,3+js.length+Ws.length,0],js,Ws],e=[[255,196,0,3+$s.length+Gs.length,16],$s,Gs],t=[[255,196,0,3+zs.length+Vs.length,1],zs,Vs],n=[[255,196,0,3+Ys.length+Xs.length,17],Ys,Xs];return Buffer.concat([...r.map(Buffer.from),...e.map(Buffer.from),...t.map(Buffer.from),...n.map(Buffer.from)])}function ea(){return Buffer.from([255,218,0,12,3,0,0,1,17,2,17,0,63,0])}function ta(r){return Buffer.from([255,221,0,4,r>>8,r&255])}l();l();function Br(r,e,t){return r>t?t:r<e?e:r}var yl=[16,11,12,14,12,10,16,14,13,14,18,17,16,19,24,40,26,24,22,22,24,49,35,37,29,40,58,51,61,60,57,51,56,55,64,72,92,78,64,68,87,69,55,56,80,109,81,87,95,98,103,104,103,62,77,113,121,112,100,120,92,101,103,99],gl=[17,18,18,24,21,24,47,26,26,47,99,66,56,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];function ra(r){let e=Br(r,1,99),t=Buffer.alloc(128),n=r<50?Math.floor(5e3/e):200-e*2;for(let i=0;i<64;i++){let o=Math.floor((yl[i]*n+50)/100),s=Math.floor((gl[i]*n+50)/100);t.writeUInt8(Br(o,1,255),i),t.writeUInt8(Br(s,1,255),i+64)}return t}function ui(r=0,e=0){let t=Ks(),n=Zs(),i=ea();return function(s){let a,u=[];for(let w of s){let T=re(w),X=T.readUInt8(0),P=T.readUInt8(1)<<16|T.readUInt8(2)<<8|T.readUInt8(3),K=T.readUInt8(4),ue=T.readUInt8(5),rt=T.readUInt8(6)*8||r,He=T.readUInt8(7)*8||e;T=T.slice(8);let qe=0;if(K>=64&&K<=127&&(qe=T.readUInt16BE(0),T=T.slice(4)),ue>=128&&P===0){let Ti=T.readUInt8(1),Gt=T.readUInt16BE(2),La=T.slice(4,4+Gt);a={typeSpecific:X,type:K,width:rt,height:He,DRI:qe,precision:Ti,qTable:La},T=T.slice(4+Gt)}else if(ue<128&&P===0){let Gt=ra(ue);a={typeSpecific:X,type:K,width:rt,height:He,DRI:qe,precision:0,qTable:Gt}}u.push(T)}if(a===void 0)throw new Error("no quantization header present");let{precision:f,qTable:p,type:d,width:y,height:g}=a,_=Js(f,p),b=a.DRI===0?Buffer.alloc(0):ta(a.DRI),E=Qs(y,g,d);return{size:{width:y,height:g},data:Buffer.concat([t,_,b,E,n,i,...u])}}}var Et=class extends M{constructor(){let e,t=[],n,i=new na.Transform({objectMode:!0,transform(o,s,a){if(o.type===5){let u=o.sdp.media.find(f=>f.type==="video"&&f.rtpmap!==void 0&&f.rtpmap.encodingName==="JPEG");if(u!==void 0&&u.rtpmap!==void 0){e=Number(u.rtpmap.payloadType);let f=u.framesize;if(f!==void 0){let[p,d]=f;n=ui(p,d)}else n=ui()}a(void 0,o)}else if(o.type===2&&N(o.data)===e){if(t.push(o.data),xe(o.data)&&t.length>0){let u=n(t);this.push({timestamp:W(o.data),ntpTimestamp:o.ntpTimestamp,payloadType:N(o.data),data:u.data,framesize:u.size,type:10}),t=[]}a()}else a(void 0,o)}});super(i)}};l();var fi=A(be()),ia=A(j());var xl=225e6,Cr=class extends M{constructor(t=xl){let n=new ia.Transform({objectMode:!0,transform:(i,o,s)=>{this._active&&i.type===8&&i.tracks!==void 0&&(this._capture=!0),this._capture&&i.type===8&&(this._bufferOffset<this._buffer.byteLength-i.data.byteLength?(i.data.copy(this._buffer,this._bufferOffset),this._bufferOffset+=i.data.byteLength):this.stop()),s(void 0,i)}});n.on("finish",()=>{this.stop()});super(n);c(this,"_active");c(this,"_capture");c(this,"_captureCallback");c(this,"_bufferOffset");c(this,"_bufferSize");c(this,"_buffer");this._buffer=Buffer.allocUnsafe(0),this._bufferSize=t,this._bufferOffset=0,this._active=!1,this._capture=!1,this._captureCallback=()=>{}}start(t){this._active||((0,fi.default)("msl:capture:start")(t),this._captureCallback=t,this._buffer=Buffer.allocUnsafe(this._bufferSize),this._bufferOffset=0,this._active=!0)}stop(){if(this._active){(0,fi.default)("msl:capture:stop")(`captured bytes: ${this._bufferOffset}`);try{this._captureCallback(this._buffer.slice(0,this._bufferOffset))}catch(t){console.error(t)}this._buffer=Buffer.allocUnsafe(0),this._bufferOffset=0,this._active=!1,this._capture=!1}}};l();var mi=A(be()),la=A(j());l();l();l();var ci=Math.pow(2,32),z=class{constructor(e){c(this,"byteLength");c(this,"value");this.byteLength=e}},se=class extends z{constructor(t=0){super(t);c(this,"copy",(t,n)=>{t.fill(0,n,n+this.byteLength)})}load(){}},ke=class extends z{constructor(t){super(t.length);c(this,"value");c(this,"copy",(t,n)=>{for(let i=0;i<this.byteLength;i+=1)t[n+i]=this.value.charCodeAt(i)});c(this,"load",(t,n)=>{this.value=t.slice(n,n+this.byteLength).toString("ascii")});this.value=t}},D=class extends z{constructor(t=0){super(1);c(this,"value");c(this,"copy",(t,n)=>{t.writeUInt8(this.value,n)});c(this,"load",(t,n)=>{this.value=t.readUInt8(n)});this.value=t}},Wt=class extends z{constructor(t){super(t.length);c(this,"value");c(this,"copy",(t,n)=>{for(let i=0;i<this.value.length;++i)t.writeUInt8(this.value[i],n+i)});c(this,"load",(t,n)=>{for(let i=0;i<this.value.length;++i)this.value[i]=t.readUInt8(n+i)});this.value=t}},I=class extends z{constructor(t=0){super(2);c(this,"value");c(this,"copy",(t,n)=>{t.writeUInt16BE(this.value,n)});c(this,"load",(t,n)=>{this.value=t.readUInt16BE(n)});this.value=t}},li=class extends z{constructor(t=0){super(3);c(this,"value");c(this,"copy",(t,n)=>{t.writeUInt8(this.value>>16&255,n),t.writeUInt8(this.value>>8&255,n+1),t.writeUInt8(this.value&255,n+2)});c(this,"load",(t,n)=>{this.value=t.readUInt8(n)<<16+t.readUInt8(n+1)<<8+t.readUInt8(n+2)});this.value=t}},pi=class extends z{constructor(t){super(t.length*2);c(this,"value");c(this,"copy",(t,n)=>{for(let i=0;i<this.value.length;++i)t.writeUInt16BE(this.value[i],n+2*i)});c(this,"load",(t,n)=>{for(let i=0;i<this.value.length;++i)this.value[i]=t.readUInt16BE(n+2*i)});this.value=t}},x=class extends z{constructor(t=0){super(4);c(this,"value");c(this,"copy",(t,n)=>{t.writeUInt32BE(this.value,n)});c(this,"load",(t,n)=>{this.value=t.readUInt32BE(n)});this.value=t}},vt=class extends z{constructor(t){super(t.length*4);c(this,"value");c(this,"copy",(t,n)=>{for(let i=0;i<this.value.length;++i)t.writeUInt32BE(this.value[i],n+4*i)});c(this,"load",(t,n)=>{for(let i=0;i<this.value.length;++i)this.value[i]=t.readUInt32BE(n+4*i)});this.value=t}},di=class extends z{constructor(t=0){super(8);c(this,"value");c(this,"copy",(t,n)=>{let i=this.value/ci|0,o=this.value-i*ci;t.writeUInt32BE(i,n),t.writeUInt32BE(o,n+4)});c(this,"load",(t,n)=>{let i=t.readUInt32BE(n),o=t.readUInt32BE(n+4);this.value=i*ci+o});this.value=t}},oa=function(r=0){return class extends z{constructor(n){super(0);c(this,"value");c(this,"copy",(n,i)=>{let o=0;for(let s of this.value)s.copy(n,i+o),o+=s.byteLength});c(this,"load",()=>{});this.value=n.reduce((i,o)=>i.concat(new I(o.length),new Wt(o)),[new D(r|n.length)]),this.byteLength=this.value.reduce((i,o)=>i+o.byteLength,0)}}},sa={ftyp:{container:"file",mandatory:!0,quantity:"one",box:"Box",is_container:!0,body:[["major_brand",ke,"isom"],["minor_version",x,0],["compatible_brands",ke,"mp41"]]},moov:{container:"file",mandatory:!0,quantity:"one",box:"Box",is_container:!0},mdat:{container:"file",mandatory:!1,quantity:"any",box:"Box",is_container:!1,body:[]},mvhd:{container:"moov",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["creation_time",x,0],["modification_time",x,0],["timescale",x,1e3],["duration",x,4294967295],["rate",x,65536],["volume",I,256],["reserved",se,10],["matrix",vt,[65536,0,0,0,65536,0,0,0,1073741824]],["pre_defined",se,24],["next_track_ID",x,4294967295]]},trak:{container:"moov",mandatory:!0,quantity:"one+",box:"Box",is_container:!0},tkhd:{container:"trak",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:3},body:[["creation_time",x,0],["modification_time",x,0],["track_ID",x,1],["reserved",se,4],["duration",x,0],["reserved2",se,8],["layer",I,0],["alternate_group",I,0],["volume",I,256],["reserved3",se,2],["matrix",vt,[65536,0,0,0,65536,0,0,0,1073741824]],["width",x,0],["height",x,0]]},tref:{container:"trak",mandatory:!1,quantity:"one-",box:"Box",is_container:!1},mdia:{container:"trak",mandatory:!1,quantity:"one",box:"Box",is_container:!0},mdhd:{container:"mdia",mandatory:!1,quantity:"one",box:"FullBox",is_container:!1,body:[["creation_time",x,0],["modification_time",x,0],["timescale",x,1e3],["duration",x,4294967295],["language",I,0],["pre_defined",I,0]]},hdlr:{container:"mdia",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["predefined",x,0],["handler_type",ke,"vide"],["reserved",se,12],["name",ke,"VideoHandler\0"]]},minf:{container:"mdia",mandatory:!0,quantity:"one",box:"Box",is_container:!0},vmhd:{container:"minf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:1},body:[["graphicsmode",I,0],["opcolor",pi,[0,0,0]]]},smhd:{container:"minf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["balance",I,0],["reserved",I]]},dinf:{container:"minf",mandatory:!0,quantity:"one",box:"Box",is_container:!0},dref:{container:"dinf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!0,body:[["entry_count",x,0]]},"url ":{container:"dref",mandatory:!0,quantity:"one+",box:"FullBox",is_container:!1,config:{flags:1},body:[]},stbl:{container:"minf",mandatory:!0,quantity:"one",box:"Box",is_container:!0},stts:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",x,0]]},stsd:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!0,body:[["entry_count",x,1]]},avc1:{container:"stsd",mandatory:!1,quantity:"one",box:"Box",is_container:!0,body:[["reserved",se,6],["data_reference_index",I,1],["pre_defined",I,0],["reserved2",se,2],["pre_defined2",vt,[0,0,0]],["width",I,1920],["height",I,1080],["horizresolution",x,4718592],["vertresolution",x,4718592],["reserved3",x,0],["frame_count",I,1],["compressorname",Wt,Buffer.alloc(32)],["depth",I,24],["pre_defined3",I,65535]]},avcC:{container:"avc1",mandatory:!1,quantity:"one",box:"Box",is_container:!1,body:[["configurationVersion",D,1],["AVCProfileIndication",D,77],["profile_compatibility",D,0],["AVCLevelIndication",D,41],["lengthSizeMinusOne",D,255],["sequenceParameterSets",oa(224),[]],["pictureParameterSets",oa(),[]]]},mp4a:{container:"stsd",mandatory:!1,quantity:"one",box:"Box",is_container:!0,body:[["reserved",se,6],["data_reference_index",I,1],["reserved2",vt,[0,0]],["channelcount",I,2],["samplesize",I,16],["pre_defined",I,0],["reserved3",I,0],["samplerate",x,0]]},esds:{container:"mp4a",mandatory:!1,quantity:"one",box:"FullBox",is_container:!1,body:[["ES_DescrTag",D,3],["ES_DescrLength",D,25],["ES_ID",I,1],["flagsAndStreamPriority",D,0],["DecoderConfigDescrTag",D,4],["DecoderConfigDescrLength",D,17],["objectProfileIndication",D,64],["streamTypeUpstreamReserved",D,21],["bufferSizeDB",Wt,[0,0,0]],["maxBitRate",x,0],["avgBitRate",x,0],["DecSpecificInfoShortTag",D,5],["DecSpecificInfoShortLength",D,2],["audioConfigBytes",I,0],["SLConfigDescrTag",D,6],["SLConfigDescrLength",D,1],["SLConfigDescrPredefined",D,2]]},stsz:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["sample_size",x,0],["sample_count",x,0]]},stsc:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",x,0]]},stco:{container:"stbl",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["entry_count",x,0]]},stss:{container:"stbl",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["entry_count",x,0]]},edts:{container:"trak",mandatory:!1,quantity:"one-",box:"Box",is_container:!0},elst:{container:"edts",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["entry_count",x,1],["segment_duration",x,0],["media_time",x,4294967295],["media_rate_integer",I,1],["media_rate_fraction",I,0]]},mvex:{container:"moov",mandatory:!1,quantity:"one-",box:"Box",is_container:!0},mehd:{container:"mvex",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,body:[["fragment_duration",x,0]]},trex:{container:"mvex",mandatory:!0,quantity:"one+",box:"FullBox",is_container:!1,body:[["track_ID",x,1],["default_sample_description_index",x,1],["default_sample_duration",x,0],["default_sample_size",x,0],["default_sample_flags",x,0]]},moof:{container:"file",mandatory:!1,quantity:"zero+",box:"Box",is_container:!1},mfhd:{container:"moof",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,body:[["sequence_number",x,0]]},traf:{container:"moof",mandatory:!1,quantity:"zero+",box:"Box",is_container:!0},tfhd:{container:"traf",mandatory:!0,quantity:"one",box:"FullBox",is_container:!1,config:{flags:32},body:[["track_ID",x,1],["default_sample_flags",x,0]]},tfdt:{container:"traf",mandatory:!1,quantity:"one-",box:"FullBox",is_container:!1,config:{version:1},body:[["baseMediaDecodeTime",di,0]]},trun:{container:"traf",mandatory:!1,quantity:"zero+",box:"FullBox",is_container:!1,config:{flags:773},body:[["sample_count",x,1],["data_offset",x,0],["first_sample_flags",x,0],["sample_duration",x,0],["sample_size",x,0]]},"....":{box:"Box",is_container:!1,body:[]},file:{box:"None",is_container:!0,mandatory:!0,quantity:"one"}},hi=class{static None(){return[]}static Box(e){return[["size",x,0],["type",ke,e]]}static FullBox(e){return[].concat(this.Box(e),[["version",D,0],["flags",li,0]])}},R=class extends z{constructor(t,n){super(0);c(this,"type");c(this,"config");c(this,"struct");this.type=t;let i=sa[this.type];if(i===void 0)throw new Error(`unknown box type: ${t}`);this.config=Object.assign({},i.config,n);let o=hi[i.box](this.type),s=i.body||[];this.struct=new Map;let a=0;for(let[u,f,p]of[].concat(o,s)){if(this.has(u))throw new Error("Trying to add existing key");let d=p;this.config[u]&&(d=this.config[u]);let y=new f(d);this.struct.set(u,{offset:a,element:y}),a+=y.byteLength}this.byteLength=a}element(t){let n=this.struct.get(t);if(n===void 0)throw new Error("invalid key");return n.element}set(t,n){this.element(t).value=n}get(t){return this.element(t).value}offset(t){let n=this.struct.get(t);if(n===void 0)throw new Error("invalid key");return n.offset}has(t){return this.struct.has(t)}add(t,n){if(this.has(t))throw new Error("Trying to add existing key");return this.struct.set(t,{offset:this.byteLength,element:n}),this.byteLength+=n.byteLength,this}buffer(){let t=Buffer.allocUnsafe(this.byteLength);return this.copy(t),t}copy(t,n=0){this.set("size",this.byteLength);for(let i of this.struct.values())i.element.copy(t,n+i.offset)}load(t,n=0){for(let i of this.struct.values())i.element.load!==void 0&&i.element.load(t,n+i.offset)}format(t=0){let n=[`${" ".repeat(t)}[${this.type}] (${this.byteLength})`];for(let[i,o]of this.struct){let s=o.element;s.format!==void 0?n.push(s.format(t+2)):n.push(`${" ".repeat(t+2)}${i} = ${s.value} (${s.byteLength})`)}return n.join(`
`)}print(t){console.warn(this.format(t))}},q=class r extends R{constructor(t,n,...i){super(t,n);c(this,"boxSize");this.boxSize=0,this.append(...i)}append(...t){for(let n of t)this.add(`box_${this.boxSize++}`,n);return this}parse(t){let n=[];for(;t.byteLength>0;){let i=new ke("....");i.load(t,4);let o=i.value,s=sa[o],a;if(s!==void 0){if(s.is_container){a=new r(o),a.load(t);let u=a.parse(t.slice(a.byteLength,a.get("size")));n.push(...u)}else if(a=new R(o),a.load(t),o==="avcC"){let u=a.element("AVCProfileIndication").value.toString(16).padStart(2,0),f=a.element("profile_compatibility").value.toString(16).padStart(2,0),p=a.element("AVCLevelIndication").value.toString(16).padStart(2,0);n.push({type:"video",mime:`avc1.${u}${f}${p}`})}else if(o==="esds"){let f=a.element("audioConfigBytes").value>>>11&31;n.push({type:"audio",mime:`mp4a.40.${f}`})}}else a=new R("...."),a.load(t),a.type=a.get("type");this.append(a),t=t.slice(a.get("size"))}return n}};var bl={1:"AAC Main",2:"AAC LC"},wl={0:"96 kHz",1:"88.2 kHz",2:"64 kHz",3:"48 kHz",4:"44.1 kHz",5:"32 kHz",6:"24 kHz",7:"22.05 kHz",8:"16 kHz",9:"12 kHz",10:"11.025 kHz",11:"8 kHz",12:"7.35 kHz"},_l={1:"Mono",2:"Stereo"},El=r=>{let e=r>>>11&31,t=r>>>7&15,n=r>>>3&15,i=bl[e]||`AAC (${e})`,o=wl[t]||"unknown",s=_l[n]||n.toString();return{coding:i,samplingRate:o,channels:s}},aa=(r,e,t)=>{let n=Number(r.fmtp.parameters.bitrate)||32e4,i=parseInt(r.fmtp.parameters.config,16),o=i>>>11&31;return{tkhd:{track_ID:t,creation_time:e,modification_time:e,width:0,height:0,volume:1},mdhd:{timescale:Number(r.rtpmap.clockrate),creation_time:e,modification_time:e,duration:0},hdlr:{handler_type:"soun",name:"SoundHandler\0"},mediaHeaderBox:new R("smhd"),sampleEntryBox:new q("mp4a",{samplerate:r.rtpmap.clockrate<<16>>>0},new R("esds",{audioConfigBytes:i,maxBitRate:n,avgBitRate:n})),defaultFrameDuration:1024,mime:`mp4a.40.${o}`,codec:El(i)}};l();l();l();var Mr=class{constructor(e){c(this,"_buffer");c(this,"_dataView");c(this,"_offset");c(this,"_bitpos");c(this,"_byte");this._buffer=e,this._dataView=new DataView(this._buffer),this._offset=0,this._bitpos=0,this._byte=0}readUint8(e){return this._dataView.getUint8(e)}readUint16(e){return this._dataView.getUint16(e)}readUint32(e){return this._dataView.getUint32(e)}readNext(){let e=this.readUint8(this._offset);return this._offset+=1,e}readBits(e){if(e>32||e===0)throw new Error("length has to be between 0 - 31 bits");let t=0;for(let n=1;n<=e;++n)this._bitpos===0&&(this._byte=this.readNext()),t=t<<1|this._byte>>8-++this._bitpos&1,this._bitpos%=8;return t}readUnsignedExpGolomb(){let e=0;for(;this.readBits(1)!==1;)e++;if(e===0)return 0;if(e>=31)throw new Error("read unsigned exponential Golomb: internal error");let t=this.readBits(e);return t|=1<<e,t-1}readSignedExpGolomb(){let e=this.readUnsignedExpGolomb();return e&1?e=e+1>>1:e=-(e>>1),e}size(){return this._buffer.byteLength}getUint8Array(){return new Uint8Array(this._buffer)}getArrayBuffer(){return this._buffer}};var Ir=class{constructor(e){c(this,"reader");this.reader=new Mr(e)}parse(){this.reader.readNext();let e=this.reader.readNext();this.reader.readNext();let t=this.reader.readNext();if(this.reader.readUnsignedExpGolomb(),[100,110,122,244,44,83,86,118].includes(e)){let _=this.reader.readUnsignedExpGolomb();if(_===3&&this.reader.readBits(1),this.reader.readUnsignedExpGolomb(),this.reader.readUnsignedExpGolomb(),this.reader.readBits(1),this.reader.readBits(1))for(let E=0;E<(_!==3?8:12);E++)this.reader.readBits(1)}this.reader.readUnsignedExpGolomb();let n=this.reader.readUnsignedExpGolomb();if(n===0)this.reader.readUnsignedExpGolomb();else if(n===1){let _=0;this.reader.readBits(1),this.reader.readSignedExpGolomb(),this.reader.readSignedExpGolomb(),_=this.reader.readUnsignedExpGolomb();for(let b=0;b<_;b++)this.reader.readSignedExpGolomb()}this.reader.readUnsignedExpGolomb(),this.reader.readBits(1);let i=this.reader.readUnsignedExpGolomb(),o=this.reader.readUnsignedExpGolomb(),s=this.reader.readBits(1);this.reader.readBits(1);let a=this.reader.readBits(1),u=a?this.reader.readUnsignedExpGolomb():0,f=a?this.reader.readUnsignedExpGolomb():0,p=a?this.reader.readUnsignedExpGolomb():0,d=a?this.reader.readUnsignedExpGolomb():0,y=(i+1)*16-u*2-f*2,g=(2-s)*(o+1)*16-p*2-d*2;return{profile:e,level:t/10,width:y,height:g}}};l();function vl(r){return r>64&&r<91?r-65:r>96&&r<123?r-71:r>47&&r<58?r+4:r===43?62:r===47?63:0}function ua(r,e){let t=r.replace(/[^A-Za-z0-9+/]/g,""),n=t.length,i=e?Math.ceil((n*3+1>>2)/e)*e:n*3+1>>2,o=new Uint8Array(i),s,a,u=0,f=0;for(let p=0;p<n;p++)if(a=p&3,u|=vl(t.charCodeAt(p))<<18-6*a,a===3||n-p===1){for(s=0;s<3&&f<i;s++,f++)o[f]=u>>>(16>>>s&24)&255;u=0}return o}var Sl={66:"Baseline",77:"Main",100:"High"},Tl=r=>{let e=parseInt(r.substr(0,2),16),t=parseInt(r.substr(4,2),16),n=Sl[e]||e.toString(),i=(t/10).toFixed(1);return{coding:"H.264",profile:n,level:i}},fa=(r,e,t)=>{let n=r.fmtp.parameters["profile-level-id"],i=r.fmtp.parameters["sprop-parameter-sets"].split(",").map(ua),o=i.slice(0,1),s=i.slice(1),a=new Ir(o[0].buffer).parse(),u=3600;return{mediaHeaderBox:new R("vmhd"),sampleEntryBox:new q("avc1",{width:a.width,height:a.height},new R("avcC",{AVCProfileIndication:o[0][1],profile_compatibility:o[0][2],AVCLevelIndication:o[0][3],sequenceParameterSets:o,pictureParameterSets:s})),tkhd:{track_ID:t,creation_time:e,modification_time:e,width:a.width<<16,height:a.height<<16,volume:0},hdlr:{},mdhd:{timescale:r.rtpmap.clockrate,creation_time:e,modification_time:e,duration:0},defaultFrameDuration:r.framerate!==void 0&&r.framerate>0&&Number(r.rtpmap.clockrate)/Number(r.framerate)||u,mime:`avc1.${n}`,codec:Tl(n)}};var ca={"MPEG4-GENERIC":aa,H264:fa},Rl=()=>({lastTimestamp:0,baseMediaDecodeTime:0,defaultFrameDuration:0,clockrate:0,bitrate:0,framerate:0,cumulativeByteLength:0,cumulativeDuration:0,cumulativeFrames:0}),Bl=(r,{byteLength:e,duration:t})=>{if(r.cumulativeByteLength+=e,r.cumulativeDuration+=t,r.cumulativeFrames++,r.cumulativeDuration>=r.clockrate){let n=8*r.cumulativeByteLength,i=r.cumulativeFrames,o=r.cumulativeDuration/r.clockrate;r.bitrate=n/o,r.framerate=i/o,r.cumulativeByteLength=0,r.cumulativeDuration=0,r.cumulativeFrames=0}},Ar=class{constructor(){c(this,"trackIdMap");c(this,"sequenceNumber");c(this,"ntpPresentationTime");c(this,"trackData");c(this,"videoTrackId");this.trackIdMap={},this.sequenceNumber=0,this.ntpPresentationTime=0,this.trackData=[]}trak(e){let t=new q("trak"),n=new q("mdia"),i=new q("minf"),o=new q("dinf"),s=new q("dref"),a=new q("stbl");return s.set("entry_count",1),t.append(new R("tkhd",e.tkhd),n.append(new R("mdhd",e.mdhd),new R("hdlr",e.hdlr),i.append(e.mediaHeaderBox,o.append(s.append(new R("url "))),a.append(new q("stsd",void 0,e.sampleEntryBox),new R("stts"),new R("stsc"),new R("stco"),new R("stsz"),new R("stss"))))),t}moov(e,t){let n=new q("moov");n.append(new R("mvhd",{creation_time:t,modification_time:t,duration:0}));let i=new q("mvex");this.trackIdMap={},this.sequenceNumber=0,this.ntpPresentationTime=0;let o=0;return this.trackData=[],e.media.forEach(s=>{if(s.rtpmap===void 0)return;let a=s.rtpmap.payloadType,u=s.rtpmap.encodingName;if(ca[u]!==void 0){this.trackIdMap[a]=++o,s.type.toLowerCase()==="video"&&(this.videoTrackId=o);let f=ca[u](s,t,o);s.mime=f.mime,s.codec=f.codec;let p=Rl();p.clockrate=s.rtpmap.clockrate,p.defaultFrameDuration=f.defaultFrameDuration,this.trackData.push(p);let d=this.trak(f);n.append(d),i.append(new R("trex",{track_ID:o}))}}),n.append(i),n}moof(e){let{trackId:t,timestamp:n,byteLength:i}=e,o=t-1,s=this.trackData[o],a=s.lastTimestamp!==0?n-s.lastTimestamp|0:s.defaultFrameDuration;s.lastTimestamp=n;let u=new q("moof"),f=new q("traf"),p=new R("trun",{sample_duration:a,sample_size:i,first_sample_flags:64});return u.append(new R("mfhd",{sequence_number:this.sequenceNumber++}),f.append(new R("tfhd",{track_ID:t}),new R("tfdt",{baseMediaDecodeTime:s.baseMediaDecodeTime}),p)),s.baseMediaDecodeTime+=a,p.set("data_offset",u.byteLength+8),Bl(s,{byteLength:i,duration:a}),u}mdat(e){let t=new R("mdat");return t.add("data",e),t}setPresentationTime(e,t){if(!this.ntpPresentationTime&&t&&e===this.videoTrackId){let n=e-1,i=this.trackData[n];this.ntpPresentationTime=t-1e3*(i.baseMediaDecodeTime/i.clockrate)}}};var St=class extends M{constructor(){let t=new Ar,n=o=>{this.onSync&&this.onSync(o)},i=new la.Transform({objectMode:!0,transform(o,s,a){if(o.type===5){let u=Math.floor(new Date().getTime()/1e3+2082852e3),f=new R("ftyp"),p=t.moov(o.sdp,u),d=Buffer.allocUnsafe(f.byteLength+p.byteLength);f.copy(d,0),p.copy(d,f.byteLength),(0,mi.default)("msl:mp4:isom")(`ftyp: ${f.format()}`),(0,mi.default)("msl:mp4:isom")(`moov: ${p.format()}`);let y=o.sdp.media.map(g=>({type:g.type,encoding:g.rtpmap&&g.rtpmap.encodingName,mime:g.mime,codec:g.codec}));this.push({type:8,data:d,tracks:y,ftyp:f,moov:p})}else if(o.type===6||o.type===7){let{payloadType:u,timestamp:f,ntpTimestamp:p}=o,d=t.trackIdMap[u];if(d){t.ntpPresentationTime||(t.setPresentationTime(d,p),t.ntpPresentationTime&&n(t.ntpPresentationTime));let y,g=o.type===7?o.nalType===5:void 0;t.ntpPresentationTime&&g&&o.ntpTimestamp!==void 0&&(y=(o.ntpTimestamp-t.ntpPresentationTime)/1e3);let _=o.data.byteLength,b=t.moof({trackId:d,timestamp:f,byteLength:_}),E=t.mdat(o.data),w=Buffer.allocUnsafe(b.byteLength+E.byteLength);b.copy(w,0),E.copy(w,b.byteLength),this.push({type:8,data:w,moof:b,mdat:E,ntpTimestamp:p,checkpointTime:y})}}else this.push(o);a()}});super(i);c(this,"boxBuilder");c(this,"onSync");this.boxBuilder=t}get bitrate(){return this.boxBuilder.trackData&&this.boxBuilder.trackData.map(t=>t.bitrate)}get framerate(){return this.boxBuilder.trackData&&this.boxBuilder.trackData.map(t=>t.framerate)}get ntpPresentationTime(){return this.boxBuilder.ntpPresentationTime}};l();var xa=A(be()),kr=A(j());l();var yi=(o=>(o[o.SR=200]="SR",o[o.RR=201]="RR",o[o.SDES=202]="SDES",o[o.BYE=203]="BYE",o[o.APP=204]="APP",o))(yi||{}),Cl=r=>({version:r[0]>>>6,padding:!!(r[0]&mt[2]),count:r[0]&31,packetType:r.readUInt8(1),length:r.readUInt16BE(2)}),gi=r=>{let e=Cl(r);switch(e.packetType){case 200:return Ml(r,e);case 201:return Il(r,e);case 202:return Al(r,e);case 203:return Ll(r,e);case 204:return Fl(r,e);default:return e}},Lr=(r,e)=>({type:3,data:e,channel:r,rtcp:gi(e)}),pa={packetType:200},da=(r,e,t)=>{let n=[];for(let i=0;i<r;i++){let o=t+i*24;n.push({syncSource:e.readUInt32BE(o+0),fractionLost:e.readUInt8(o+4),cumulativeNumberOfPacketsLost:e.readUIntBE(o+5,3),extendedHighestSequenceNumberReceived:e.readUInt32BE(o+8),interarrivalJitter:e.readUInt32BE(o+12),lastSRTimestamp:e.readUInt32BE(o+16),delaySinceLastSR:e.readUInt32BE(o+20)})}return n},Ml=(r,e)=>Be(J({},e),{syncSource:r.readUInt32BE(4),ntpMost:r.readUInt32BE(8),ntpLeast:r.readUInt32BE(12),rtpTimestamp:r.readUInt32BE(16),sendersPacketCount:r.readUInt32BE(20),sendersOctetCount:r.readUInt32BE(24),reports:da(e.count,r,28)}),Fr=r=>r.packetType===200,Il=(r,e)=>Be(J({},e),{syncSource:r.readUInt32BE(4),reports:da(e.count,r,8)}),ha=r=>r.packetType===201,xi=(u=>(u[u.CNAME=1]="CNAME",u[u.NAME=2]="NAME",u[u.EMAIL=3]="EMAIL",u[u.PHONE=4]="PHONE",u[u.LOC=5]="LOC",u[u.TOOL=6]="TOOL",u[u.NOTE=7]="NOTE",u[u.PRIV=8]="PRIV",u))(xi||{}),Al=(r,e)=>{let t=[],n=4;for(let i=0;i<e.count;i++){let o={source:r.readUInt32BE(n),items:[]};for(n+=4;;){let s=r.readUInt8(n++);if(s===0){n%4!==0&&(n+=4-n%4);break}let a=r.readUInt8(n++);if(s===8){let u=r.readUInt8(n),f=r.toString("utf8",n+1,n+1+u),p=r.toString("utf8",n+1+u,n+a);o.items.push([8,f,p])}else{let u=r.toString("utf8",n,n+a);o.items.push([s,u])}n+=a}t.push(o)}return Be(J({},e),{syncSource:r.readUInt32BE(4),sourceDescriptions:t})},ma=r=>r.packetType===202,Ll=(r,e)=>{let t=[];for(let i=0;i<e.count;i++)t.push(r.readUInt32BE(4+4*i));let n;if(e.length>e.count){let i=4+4*e.count,o=r.readUInt8(i);n=r.toString("utf-8",i+1,i+1+o)}return Be(J({},e),{sources:t,reason:n})},Ur=r=>r.packetType===203,Fl=(r,e)=>Be(J({},e),{subtype:e.count,source:r.readUInt32BE(4),name:r.toString("ascii",8,12),data:r.slice(12)}),ya=r=>r.packetType===204;var Ul=100,ga=(0,xa.default)("msl:mse"),De=class extends ge{constructor(t){if(t===void 0)throw new Error("video element argument missing");let n,i,o=new kr.Writable({objectMode:!0,write:(a,u,f)=>{var p,d;if(a.type===8)if(this._done=f,a.tracks!==void 0||a.mime!==void 0){let y=(p=a.tracks)!=null?p:[],g=y.map(w=>w.mime).filter(w=>w),_=g.length!==0?g.join(", "):"avc1.640029, mp4a.40.2",b=(d=a.mime)!=null?d:`video/mp4; codecs="${_}"`;if(!MediaSource.isTypeSupported(b)){o.emit("error",`unsupported media type: ${b}`);return}this._lastCheckpointTime=0,n=new MediaSource,t.src=window.URL.createObjectURL(n);let E=()=>{if(n===void 0){o.emit("error","no MediaSource instance");return}window.URL.revokeObjectURL(t.src),n.removeEventListener("sourceopen",E),this.onSourceOpen&&this.onSourceOpen(n,y),i=this.addSourceBuffer(t,n,b),i.onerror=w=>{console.error("error on SourceBuffer: ",w),o.emit("error")};try{i.appendBuffer(a.data)}catch(w){ga("failed to append to SourceBuffer: ",w,a)}};n.addEventListener("sourceopen",E)}else{this._lastCheckpointTime=a.checkpointTime!==void 0?a.checkpointTime:this._lastCheckpointTime;try{i==null||i.appendBuffer(a.data)}catch(y){ga("failed to append to SourceBuffer: ",y,a)}}else a.type===3&&Ur(a.rtcp)&&(n==null?void 0:n.readyState)==="open"&&n.endOfStream(),f()}});o.on("finish",()=>{console.warn("incoming stream finished: end stream"),n&&n.readyState==="open"&&n.endOfStream()}),o.on("error",a=>{console.error("error on incoming stream: ",a),i&&i.updating?i.addEventListener("updateend",()=>{(n==null?void 0:n.readyState)==="open"&&n.endOfStream()}):(n==null?void 0:n.readyState)==="open"&&n.endOfStream()});let s=new kr.Readable({objectMode:!0,read(){}});s.on("error",()=>{console.warn("outgoing stream broke somewhere")});super(o,s);c(this,"_videoEl");c(this,"_done");c(this,"_lastCheckpointTime");c(this,"onSourceOpen");this._videoEl=t,this._lastCheckpointTime=0}addSourceBuffer(t,n,i){let o=n.addSourceBuffer(i),s=0,a=()=>{if(++s,s>Ul&&o.buffered.length){s=0;let u=o.buffered.length-1,f=o.buffered.start(u),p=Math.min(t.currentTime,this._lastCheckpointTime)-10;try{if(p>f){o.remove(f,p);return}}catch(d){console.warn(d)}}this._done&&this._done()};return o.addEventListener("updateend",a),o}get currentTime(){return this._videoEl.currentTime}play(){return Q(this,null,function*(){return yield this._videoEl.play()})}pause(){return this._videoEl.pause()}};l();var ba=A(j());var Pe=class extends M{constructor(){let e,t=[],n=new ba.Transform({objectMode:!0,transform(i,o,s){if(i.type===5){let a;for(let u of i.sdp.media)u.type==="application"&&u.rtpmap&&u.rtpmap.encodingName==="VND.ONVIF.METADATA"&&(a=u);a&&a.rtpmap&&(e=Number(a.rtpmap.payloadType)),s(void 0,i)}else if(i.type===2&&N(i.data)===e){if(t.push(re(i.data)),xe(i.data)&&t.length>0){let a={timestamp:W(i.data),ntpTimestamp:i.ntpTimestamp,payloadType:N(i.data),data:Buffer.concat(t),type:9};s(void 0,a),t=[];return}s()}else s(void 0,i)}});super(n)}};l();var wi=A(j());l();var wa=A(be()),kl="RTSP/1.0",_a=r=>{if(!r.method||!r.uri)throw new Error("message needs to contain a method and a uri");let e=r.protocol||kl,t=r.headers||{},n=[`${r.method} ${r.uri} ${e}`,Object.entries(t).map(([i,o])=>`${i}: ${o}`).join(`\r
`),`\r
`].join(`\r
`);return(0,wa.default)("msl:rtsp:outgoing")(n),Buffer.from(n)};l();l();var ae=(r,e)=>{let t=`
${e.toLowerCase()}: `,n=r.toString().toLowerCase().indexOf(t);if(n>=0){let i=r.indexOf(`
`,n+t.length);return r.toString("ascii",n+t.length,i).trim()}return null},Dr=r=>{let e=ae(r,"CSeq");return e!==null?Number(e):null},Pr=r=>{let e=ae(r,"Session");return e?e.split(";")[0]:null},Nr=r=>{let e=ae(r,"Session");if(e===null)return null;let t=60,n="timeout=",i=e.toLowerCase().indexOf(n);if(i!==-1){let o=e.substring(i+n.length);o=o.split(";")[0];let s=parseInt(o);return isNaN(s)?t:s}return t},Tt=r=>Number(r.toString("ascii",9,12)),Or=r=>ae(r,"Content-Base"),Hr=r=>ae(r,"Content-Location"),qr=r=>{let e=ae(r,"Connection");return e!==null&&e.toLowerCase()==="close"},jr=r=>{let e=ae(r,"Range");if(e!==null)return e.split("=")[1].split("-")},Wr=r=>{let e=[`

`,"\r\r",`\r
\r
`].map(t=>{let n=r.indexOf(t);return n!==-1?n+t.length:n}).filter(t=>t!==-1);return e.length>0?e.reduce((t,n)=>Math.min(t,n)):-1};l();var Dl=(r,e,t=0)=>{let n=`
${e}`;t=r.indexOf(n,t);let i=0,o=[];for(;t>=0;)i=r.indexOf(`
`,t+n.length),o.push(r.toString("ascii",t+n.length,i).trim()),t=r.indexOf(n,i);return o},Pl=r=>r.match(/^m=/),$r=(r,e)=>{let t=e.indexOf(r);return t<0?[e.slice(0)]:[e.slice(0,t),e.slice(t+1)]},Ea={fmtp:r=>{let[e,t]=$r(" ",r);switch(e){default:{let n=t.trim().split(";"),i={};return n.forEach(o=>{let[s,a]=$r("=",o),u=s.trim().toLowerCase();u!==""&&(i[u]=a.trim())}),{format:e,parameters:i}}}},framerate:Number,rtpmap:r=>{let[e,t]=$r(" ",r),[n,i,o]=t.toUpperCase().split("/");return o===void 0?{payloadType:Number(e),encodingName:n,clockrate:Number(i)}:{payloadType:Number(e),encodingName:n,clockrate:Number(i),encodingParameters:o}},transform:r=>r.split(";").map(e=>e.split(",").map(Number)),"x-sensor-transform":r=>r.split(";").map(e=>e.split(",").map(Number)),framesize:r=>r.split(" ")[1].split("-").map(Number)},Nl=r=>{let[e,t]=$r(":",r);return t===void 0?{[e]:!0}:Ea[e]!==void 0?{[e]:Ea[e](t)}:{[e]:t}},Ol=r=>{let e=r.slice(0,1),t=r.slice(2);switch(e){case"v":return{version:t};case"o":{let[n,i,o,s,a,u]=t.split(" ");return{origin:{addrType:a,netType:s,sessionId:i,sessionVersion:o,unicastAddress:u,username:n}}}case"s":return{sessionName:t};case"i":return{sessionInformation:t};case"u":return{uri:t};case"e":return{email:t};case"p":return{phone:t};case"c":{let[n,i,o]=t.split(" ");return{connectionData:{addrType:i,connectionAddress:o,netType:n}}}case"b":{let[n,i]=t.split(":");return{bwtype:n,bandwidth:i}}case"t":{let[n,i]=t.split(" ").map(Number);return{time:{startTime:n,stopTime:i}}}case"r":{let[n,i,...o]=t.split(" ").map(Number);return{repeatTimes:{repeatInterval:n,activeDuration:i,offsets:o}}}case"z":return;case"k":return;case"a":return Nl(t);case"m":{let[n,i,o,s]=t.split(" ");return{type:n,port:Number(i),protocol:o,fmt:Number(s)}}default:}},va=r=>{let e=r.indexOf(`
m=`);return Dl(r,"a=control:",e)},bi=r=>{let e=r.toString("ascii").split(`
`).map(o=>o.trim()),t={session:{},media:[]},n=0,i=t.session;for(let o of e)Pl(o)&&(t.media[n]={},i=t.media[n],++n),i=Object.assign(i,Ol(o));return t},Gr=r=>({type:5,data:r,sdp:bi(r)});var Ta=4,Sa=36,Hl=r=>{let e=Buffer.alloc(Ta),t=0,n=0;for(;n<e.length;){let u=r[t++],f=Math.min(u.length,e.length-n);u.copy(e,n,0,f),n+=f}let i=e[1],o=e.length,s=e.readUInt16BE(2),a=o+s;return{channel:i,begin:o,end:a}},zr=class{constructor(){c(this,"_chunks",[]);c(this,"_length",0);c(this,"_state",0);c(this,"_packet");this._init()}_init(){this._chunks=[],this._length=0,this._state=0}_push(e){this._chunks.push(e),this._length+=e.length}_parseRtsp(){let e=[],t=Buffer.concat(this._chunks),n=Wr(t);if(n===-1)return e;let i=n,o=ae(t,"Content-Length");if(o&&parseInt(o)>t.length-i)return e;if(this._init(),i===t.length||t[i]===Sa){let s=t.slice(0,i);e.push({type:4,data:s});let a=t.slice(i);this._push(a)}else{let s=t,a=t.slice(i);e.push({type:4,data:s}),e.push(Gr(a))}return e}_parseInterleaved(){let e=[];if(this._length<Ta||(this._packet||(this._packet=Hl(this._chunks)),this._length<this._packet.end))return e;let t=Buffer.concat(this._chunks),n=t.slice(this._packet.begin,this._packet.end),i=t.slice(this._packet.end),o=this._packet.channel;if(delete this._packet,this._init(),this._push(i),o%2===0)e.push({type:2,data:n,channel:o});else{let s=n;do{let a=s.readUInt16BE(2)*4+4;e.push(Lr(o,s.slice(0,a))),s=s.slice(a)}while(s.length>0)}return e}_setState(){for(;this._chunks.length>0&&this._chunks[0].length===0;)this._chunks.shift();let e=this._chunks[0];if(this._chunks.length===0)this._state=0;else if(e[0]===Sa)this._state=1;else if(e.toString("ascii",0,4)==="RTSP")this._state=2;else throw new Error(`Unknown chunk of length ${e.length}`)}parse(e){this._push(e),this._state===0&&this._setState();let t=[],n=!1;for(;!n;){let i=[];switch(this._state){case 0:break;case 1:i=this._parseInterleaved();break;case 2:i=this._parseRtsp();break;default:throw new Error("internal error: unknown state")}i.length>0?t=t.concat(i):n=!0,this._setState()}return t}};var Rt=class extends M{constructor(){let e=new zr,t=new wi.Transform({objectMode:!0,transform(i,o,s){if(i.type===1)try{e.parse(i.data).forEach(a=>t.push(a)),s()}catch(a){s(a)}else s(void 0,i)}}),n=new wi.Transform({objectMode:!0,transform(i,o,s){if(i.type===4){let a=_a(i);s(void 0,{type:1,data:a})}else s(void 0,i)}});super(t,n)}};l();var Yr=A(be()),Ra=A(j());l();var Bt=(r,e)=>{let t;if(e!==void 0){if(typeof e!="object")throw new Error("merge expects override to be an object!");t=Object.keys(e).reduce((n,i)=>(e[i]!==void 0&&(n[i]=e[i]),n),{})}return Object.assign({},r,t)};l();var ql=Date.UTC(1900,0,1);function Vr(r,e){let t=(r+e/4294967296)*1e3;return ql+t}function jl(r){return/^[^:]+:\/\//.test(r)}var Xr=(s=>(s.OPTIONS="OPTIONS",s.DESCRIBE="DESCRIBE",s.SETUP="SETUP",s.PLAY="PLAY",s.PAUSE="PAUSE",s.TEARDOWN="TEARDOWN",s))(Xr||{}),Wl=5,$l=(r=typeof window=="undefined"?"":window.location.hostname,e=[])=>({uri:e.length>0?`rtsp://${r}/axis-media/media.amp?${e.join("&")}`:`rtsp://${r}/axis-media/media.amp`}),$t=class extends Error{constructor(t,n){super(t);c(this,"code");this.name="RTSPResponseError",this.code=n}},Ct=class extends M{constructor(t={}){let{uri:n,headers:i,defaultHeaders:o}=Bt($l(t.hostname,t.parameters),t),s=new Ra.Transform({objectMode:!0,transform:(a,u,f)=>{a.type===4?(this._onRtsp(a),f()):a.type===3?(this._onRtcp(a),this.onRtcp&&this.onRtcp(a.rtcp),f(void 0,a)):a.type===2?(this._onRtp(a),f(void 0,a)):(a.type===5&&(this._onSdp(a),this.onSdp&&this.onSdp(a.sdp)),f(void 0,a))}});s.on("end",()=>{this._outgoingClosed=!0});super(s);c(this,"uri");c(this,"headers");c(this,"defaultHeaders");c(this,"t0");c(this,"n0");c(this,"clockrates");c(this,"startTime");c(this,"onRtcp");c(this,"onSdp");c(this,"onError");c(this,"onPlay");c(this,"retry");c(this,"_outgoingClosed");c(this,"_sequence");c(this,"_callStack");c(this,"_callHistory");c(this,"_state");c(this,"_waiting");c(this,"_contentBase");c(this,"_contentLocation");c(this,"_sessionId");c(this,"_sessionControlURL");c(this,"_renewSessionInterval");this._outgoingClosed=!1,this._reset(),this.update(n,i,o),this._sessionControlURL=this._controlURL()}update(t,n={},i={}){if(t===void 0)throw new Error("You must supply an uri when creating a RtspSessionComponent");this.uri=t,this.defaultHeaders=i,this.headers=Object.assign({OPTIONS:{},PLAY:{},SETUP:{Blocksize:"64000"},DESCRIBE:{Accept:"application/sdp"},PAUSE:{}},n)}_reset(){this._sequence=1,this.retry=()=>console.error("No request sent, can't retry"),this._callStack=[],this._callHistory=[],this._state="idle",this._waiting=!1,this._contentBase=null,this._sessionId=null,this._renewSessionInterval!==null&&clearInterval(this._renewSessionInterval),this._renewSessionInterval=null,this.t0=void 0,this.n0=void 0,this.clockrates=void 0}_controlURL(t){var i,o;if(t!==void 0&&jl(t))return t;let n=(o=(i=this._contentBase)!=null?i:this._contentLocation)!=null?o:this.uri;if(n==null)throw new Error("relative or missing control attribute but no base URL available");return t===void 0||t==="*"?n:new URL(t,n).href}_onRtsp(t){this._waiting=!1;let n=Tt(t.data),i=qr(t.data),o=Dr(t.data);if(o===null)throw new Error("rtsp: expected sequence number");if(this._callHistory===void 0)throw new Error("rtsp: internal error");let s=this._callHistory[o-1];if((0,Yr.default)("msl:rtsp:incoming")(`${t.data}`),!this._sessionId&&!i){this._sessionId=Pr(t.data);let a=Nr(t.data);a!==null&&(this._renewSessionInterval!==null&&clearInterval(this._renewSessionInterval),this._renewSessionInterval=setInterval(()=>{this._enqueue({method:"OPTIONS"}),this._dequeue()},Math.max(Wl,a-5)*1e3))}this._contentBase||(this._contentBase=Or(t.data)),this._contentLocation||(this._contentLocation=Hr(t.data)),n>=400&&this.onError&&this.onError(new $t(t.data.toString("ascii"),n)),s==="PLAY"&&this.onPlay&&this.onPlay(jr(t.data)),i&&((0,Yr.default)("msl:rtsp:incoming")(`RTSP Session ${this._sessionId} ended with statusCode: ${n}`),this._sessionId=null),this._dequeue()}_onRtcp(t){if(this.t0===void 0||this.n0===void 0)throw new Error("rtsp: internal error");if(Fr(t.rtcp)){let n=t.channel-1;this.t0[n]=t.rtcp.rtpTimestamp,this.n0[n]=Vr(t.rtcp.ntpMost,t.rtcp.ntpLeast)}}_onRtp(t){if(this.t0===void 0||this.n0===void 0||this.clockrates===void 0)throw new Error("rtsp: internal error");let n=t.channel,i=this.t0[n],o=this.n0[n];if(typeof i!="undefined"&&typeof o!="undefined"){let s=this.clockrates[n],u=W(t.data)-i|0;t.ntpTimestamp=u/s*1e3+o}}_onSdp(t){this.n0={},this.t0={},this.clockrates={},this._sessionControlURL=this._controlURL(t.sdp.session.control),t.sdp.media.forEach((n,i)=>{if(n.rtpmap===void 0)return;let{clockrate:o}=n.rtpmap,s=i*2,a=s+1,u=n.control===void 0?this._sessionControlURL:this._controlURL(n.control);this._enqueue({method:"SETUP",headers:{Transport:`RTP/AVP/TCP;unicast;interleaved=${s}-${a}`},uri:u}),this.clockrates!==void 0&&(this.clockrates[s]=o)}),this._state==="playing"&&this._enqueue({method:"PLAY",headers:{Range:`npt=${this.startTime||0}-`},uri:this._sessionControlURL}),this._dequeue()}play(t=0){if(this._state==="idle")this.startTime=Number(t)||0,this._enqueue({method:"OPTIONS"}),this._enqueue({method:"DESCRIBE"});else if(this._state==="paused"){if(this._sessionId===null||this._sessionId===void 0)throw new Error("rtsp: internal error");this._enqueue({method:"PLAY",headers:{Session:this._sessionId},uri:this._sessionControlURL})}this._state="playing",this._dequeue()}pause(){this._enqueue({method:"PAUSE"}),this._state="paused",this._dequeue()}stop(){this._sessionId?this._enqueue({method:"TEARDOWN"}):this._callStack=[],this._state="idle",this._renewSessionInterval!==null&&(clearInterval(this._renewSessionInterval),this._renewSessionInterval=null),this._dequeue()}send(t){let{method:n,headers:i,uri:o}=t;if(n===void 0)throw new Error("missing method when send request");if(this._waiting=!0,this.retry=this.send.bind(this,t),this._sequence===void 0||this.headers===void 0||this._callHistory===void 0)throw new Error("rtsp: internal error");let s=Object.assign({type:4,uri:o||this._sessionControlURL,data:Buffer.alloc(0)},{method:n,headers:i},{headers:Object.assign({CSeq:this._sequence++},this.defaultHeaders,this.headers[n],i)});this._sessionId&&(s.headers.Session=this._sessionId),this._callHistory.push(n),this._outgoingClosed?(0,Yr.default)("msl:rtsp:outgoing")(`Unable to send ${n}, connection closed`):this.outgoing.push(s)}_enqueue(t){if(this._callStack===void 0)throw new Error("rtsp: internal error");this._callStack.push(t)}_dequeue(){if(this._callStack===void 0)throw new Error("rtsp: internal error");if(!this._waiting&&this._callStack.length>0){let t=this._callStack.shift();t!==void 0&&this.send(t)}}};l();var Kr=A(be()),Jr=A(j());l();var Gl=10007,zl=(r=window.location.host,e=window.location.protocol)=>({uri:`${e==="https:"?"wss:":"ws:"}//${r}/rtsp-over-websocket`,tokenUri:`${e}//${r}/axis-cgi/rtspwssession.cgi`,protocol:"binary",timeout:Gl}),Ba=(...e)=>Q(void 0,[...e],function*(r={}){let{uri:t,tokenUri:n,protocol:i,timeout:o}=Bt(zl(r.host,r.scheme),r);if(t===void 0)throw new Error("ws: internal error");return yield new Promise((s,a)=>{try{let u=new WebSocket(t,i),f=setTimeout(()=>{clearTimeout(f),u.readyState===WebSocket.CONNECTING&&(u.onerror=null,a(new Error("websocket connection timed out")))},o);u.binaryType="arraybuffer",u.onerror=p=>{clearTimeout(f);function d(){if(this.status>=400){console.warn("failed to load token",this.status,this.responseText),a(p);return}let g=this.responseText.trim(),_=`${t}?rtspwssession=${g}`,b=new WebSocket(_,i);b.binaryType="arraybuffer",b.onerror=E=>{a(E)},b.onopen=()=>s(b)}let y=new XMLHttpRequest;y.addEventListener("load",d),y.addEventListener("error",g=>{console.warn("failed to get token"),a(g)}),y.addEventListener("abort",()=>a(p)),y.open("GET",`${n}?${Date.now()}`);try{y.send()}catch(g){a(p)}},u.onopen=()=>{clearTimeout(f),s(u)}}catch(u){a(u)}})});var Vl=1001,ne=class r extends oe{constructor(t){if(t===void 0)throw new Error("socket argument missing");let n=new Jr.Readable({objectMode:!0,read(){}});t.onmessage=o=>{let s=Buffer.from(o.data);n.push({data:s,type:1})||t.readyState===WebSocket.OPEN&&((0,Kr.default)("msl:websocket:incoming")("downstream frozen"),t.close())},n.on("error",o=>{console.warn("closing socket due to incoming error",o),t.close()});let i=new Jr.Writable({objectMode:!0,write(o,s,a){try{t.send(o.data)}catch(u){console.warn("message lost during send:",o)}a()}});i.on("error",o=>{console.warn("error during websocket send, ignoring:",o)}),i.on("finish",()=>{(0,Kr.default)("msl:websocket:outgoing")("finish"),t.readyState!==WebSocket.CLOSED&&t.close()}),t.onclose=o=>{(0,Kr.default)("msl:websocket:close")(`${o.code}`),o.code===Vl&&this.onServerClose&&this.onServerClose(),n.push(null),i.end()};super(n,i);c(this,"onServerClose")}static open(t){return Q(this,null,function*(){return yield Ba(t).then(n=>new r(n))})}};var vi={};zt(vi,{Html5CanvasPipeline:()=>Zr,Html5VideoMetadataPipeline:()=>en,Html5VideoPipeline:()=>At,HttpMsePipeline:()=>on,MetadataPipeline:()=>tn,Pipeline:()=>Ne,RtspMjpegPipeline:()=>Mt,RtspMp4Pipeline:()=>It,RtspPipeline:()=>ie,WsSdpPipeline:()=>rn});l();l();var Ne=class{constructor(...e){c(this,"firstComponent");c(this,"lastComponent");c(this,"_set");let[t,...n]=e;this._set=new Set(e),this.firstComponent=t,this.lastComponent=n.reduce((i,o)=>i.connect(o),t)}init(...e){let[t,...n]=e;this._set=new Set(e),this.firstComponent=t,this.lastComponent=n.reduce((i,o)=>i.connect(o),t)}insertAfter(e,t){if(!this._set.has(e))throw new Error("insertion point not part of pipeline");if(this._set.has(t))throw new Error("new component already in the pipeline");let n=e.next;return n===null?(e.connect(t),this.lastComponent=t):(e.disconnect(),e.connect(t).connect(n)),this._set.add(t),this}insertBefore(e,t){if(!this._set.has(e))throw new Error("insertion point not part of pipeline");if(this._set.has(t))throw new Error("new component already in the pipeline");let n=e.prev;return n===null?(t.connect(e),this.firstComponent=t):(n.disconnect(),n.connect(t).connect(e)),this._set.add(t),this}remove(e){if(!this._set.has(e))throw new Error("component not part of pipeline");let t=e.prev,n=e.next;if(t===null&&n===null)throw new Error("cannot remove last component");return t===null&&n!==null?(e.disconnect(),this.firstComponent=n):t!==null&&n===null?(t.disconnect(),this.lastComponent=t):t!==null&&n!==null&&(t.disconnect(),e.disconnect(),t.connect(n)),this._set.delete(e),this}append(...e){return e.forEach(t=>{this.insertAfter(this.lastComponent,t)}),this}prepend(...e){return e.forEach(t=>{this.insertBefore(this.firstComponent,t)}),this}};l();l();var ie=class extends Ne{constructor(t){let n=new Rt,i=new Ct(t);i.onSdp=o=>{this.onSdp&&this.onSdp(o)},i.onPlay=o=>{this.onPlay&&this.onPlay(o)};super(n,i);c(this,"onSdp");c(this,"onPlay");c(this,"rtsp");this.rtsp=i}};var Mt=class extends ie{constructor(e){super(e);let t=new Et;this.append(t)}};l();var It=class extends ie{constructor(t){super(t);c(this,"onSync");c(this,"_mp4Muxer");let n=new _t,i=new yt,o=new St;o.onSync=s=>{this.onSync&&this.onSync(s)},this.append(n,i,o),this._mp4Muxer=o}get bitrate(){return this._mp4Muxer.bitrate}get framerate(){return this._mp4Muxer.framerate}};l();l();l();l();l();var Y=class r{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){let t=r.hexChars,n=r.hexOut,i,o,s,a;for(a=0;a<4;a+=1)for(o=a*8,i=e[a],s=0;s<8;s+=2)n[o+1+s]=t.charAt(i&15),i>>>=4,n[o+0+s]=t.charAt(i&15),i>>>=4;return n.join("")}static _md5cycle(e,t){let n=e[0],i=e[1],o=e[2],s=e[3];n+=(i&o|~i&s)+t[0]-680876936|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&o)+t[1]-389564586|0,s=(s<<12|s>>>20)+n|0,o+=(s&n|~s&i)+t[2]+606105819|0,o=(o<<17|o>>>15)+s|0,i+=(o&s|~o&n)+t[3]-1044525330|0,i=(i<<22|i>>>10)+o|0,n+=(i&o|~i&s)+t[4]-176418897|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&o)+t[5]+1200080426|0,s=(s<<12|s>>>20)+n|0,o+=(s&n|~s&i)+t[6]-1473231341|0,o=(o<<17|o>>>15)+s|0,i+=(o&s|~o&n)+t[7]-45705983|0,i=(i<<22|i>>>10)+o|0,n+=(i&o|~i&s)+t[8]+1770035416|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&o)+t[9]-1958414417|0,s=(s<<12|s>>>20)+n|0,o+=(s&n|~s&i)+t[10]-42063|0,o=(o<<17|o>>>15)+s|0,i+=(o&s|~o&n)+t[11]-1990404162|0,i=(i<<22|i>>>10)+o|0,n+=(i&o|~i&s)+t[12]+1804603682|0,n=(n<<7|n>>>25)+i|0,s+=(n&i|~n&o)+t[13]-40341101|0,s=(s<<12|s>>>20)+n|0,o+=(s&n|~s&i)+t[14]-1502002290|0,o=(o<<17|o>>>15)+s|0,i+=(o&s|~o&n)+t[15]+1236535329|0,i=(i<<22|i>>>10)+o|0,n+=(i&s|o&~s)+t[1]-165796510|0,n=(n<<5|n>>>27)+i|0,s+=(n&o|i&~o)+t[6]-1069501632|0,s=(s<<9|s>>>23)+n|0,o+=(s&i|n&~i)+t[11]+643717713|0,o=(o<<14|o>>>18)+s|0,i+=(o&n|s&~n)+t[0]-373897302|0,i=(i<<20|i>>>12)+o|0,n+=(i&s|o&~s)+t[5]-701558691|0,n=(n<<5|n>>>27)+i|0,s+=(n&o|i&~o)+t[10]+38016083|0,s=(s<<9|s>>>23)+n|0,o+=(s&i|n&~i)+t[15]-660478335|0,o=(o<<14|o>>>18)+s|0,i+=(o&n|s&~n)+t[4]-405537848|0,i=(i<<20|i>>>12)+o|0,n+=(i&s|o&~s)+t[9]+568446438|0,n=(n<<5|n>>>27)+i|0,s+=(n&o|i&~o)+t[14]-1019803690|0,s=(s<<9|s>>>23)+n|0,o+=(s&i|n&~i)+t[3]-187363961|0,o=(o<<14|o>>>18)+s|0,i+=(o&n|s&~n)+t[8]+1163531501|0,i=(i<<20|i>>>12)+o|0,n+=(i&s|o&~s)+t[13]-1444681467|0,n=(n<<5|n>>>27)+i|0,s+=(n&o|i&~o)+t[2]-51403784|0,s=(s<<9|s>>>23)+n|0,o+=(s&i|n&~i)+t[7]+1735328473|0,o=(o<<14|o>>>18)+s|0,i+=(o&n|s&~n)+t[12]-1926607734|0,i=(i<<20|i>>>12)+o|0,n+=(i^o^s)+t[5]-378558|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^o)+t[8]-2022574463|0,s=(s<<11|s>>>21)+n|0,o+=(s^n^i)+t[11]+1839030562|0,o=(o<<16|o>>>16)+s|0,i+=(o^s^n)+t[14]-35309556|0,i=(i<<23|i>>>9)+o|0,n+=(i^o^s)+t[1]-1530992060|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^o)+t[4]+1272893353|0,s=(s<<11|s>>>21)+n|0,o+=(s^n^i)+t[7]-155497632|0,o=(o<<16|o>>>16)+s|0,i+=(o^s^n)+t[10]-1094730640|0,i=(i<<23|i>>>9)+o|0,n+=(i^o^s)+t[13]+681279174|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^o)+t[0]-358537222|0,s=(s<<11|s>>>21)+n|0,o+=(s^n^i)+t[3]-722521979|0,o=(o<<16|o>>>16)+s|0,i+=(o^s^n)+t[6]+76029189|0,i=(i<<23|i>>>9)+o|0,n+=(i^o^s)+t[9]-640364487|0,n=(n<<4|n>>>28)+i|0,s+=(n^i^o)+t[12]-421815835|0,s=(s<<11|s>>>21)+n|0,o+=(s^n^i)+t[15]+530742520|0,o=(o<<16|o>>>16)+s|0,i+=(o^s^n)+t[2]-995338651|0,i=(i<<23|i>>>9)+o|0,n+=(o^(i|~s))+t[0]-198630844|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~o))+t[7]+1126891415|0,s=(s<<10|s>>>22)+n|0,o+=(n^(s|~i))+t[14]-1416354905|0,o=(o<<15|o>>>17)+s|0,i+=(s^(o|~n))+t[5]-57434055|0,i=(i<<21|i>>>11)+o|0,n+=(o^(i|~s))+t[12]+1700485571|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~o))+t[3]-1894986606|0,s=(s<<10|s>>>22)+n|0,o+=(n^(s|~i))+t[10]-1051523|0,o=(o<<15|o>>>17)+s|0,i+=(s^(o|~n))+t[1]-2054922799|0,i=(i<<21|i>>>11)+o|0,n+=(o^(i|~s))+t[8]+1873313359|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~o))+t[15]-30611744|0,s=(s<<10|s>>>22)+n|0,o+=(n^(s|~i))+t[6]-1560198380|0,o=(o<<15|o>>>17)+s|0,i+=(s^(o|~n))+t[13]+1309151649|0,i=(i<<21|i>>>11)+o|0,n+=(o^(i|~s))+t[4]-145523070|0,n=(n<<6|n>>>26)+i|0,s+=(i^(n|~o))+t[11]-1120210379|0,s=(s<<10|s>>>22)+n|0,o+=(n^(s|~i))+t[2]+718787259|0,o=(o<<15|o>>>17)+s|0,i+=(s^(o|~n))+t[9]-343485551|0,i=(i<<21|i>>>11)+o|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=o+e[2]|0,e[3]=s+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(r.stateIdentity),this}appendStr(e){let t=this._buffer8,n=this._buffer32,i=this._bufferLength,o,s;for(s=0;s<e.length;s+=1){if(o=e.charCodeAt(s),o<128)t[i++]=o;else if(o<2048)t[i++]=(o>>>6)+192,t[i++]=o&63|128;else if(o<55296||o>56319)t[i++]=(o>>>12)+224,t[i++]=o>>>6&63|128,t[i++]=o&63|128;else{if(o=(o-55296)*1024+(e.charCodeAt(++s)-56320)+65536,o>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[i++]=(o>>>18)+240,t[i++]=o>>>12&63|128,t[i++]=o>>>6&63|128,t[i++]=o&63|128}i>=64&&(this._dataLength+=64,r._md5cycle(this._state,n),i-=64,n[0]=n[16])}return this._bufferLength=i,this}appendAsciiStr(e){let t=this._buffer8,n=this._buffer32,i=this._bufferLength,o,s=0;for(;;){for(o=Math.min(e.length-s,64-i);o--;)t[i++]=e.charCodeAt(s++);if(i<64)break;this._dataLength+=64,r._md5cycle(this._state,n),i=0}return this._bufferLength=i,this}appendByteArray(e){let t=this._buffer8,n=this._buffer32,i=this._bufferLength,o,s=0;for(;;){for(o=Math.min(e.length-s,64-i);o--;)t[i++]=e[s++];if(i<64)break;this._dataLength+=64,r._md5cycle(this._state,n),i=0}return this._bufferLength=i,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,n=e.state,i=this._state,o;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],o=0;o<t.length;o+=1)this._buffer8[o]=t.charCodeAt(o)}end(e=!1){let t=this._bufferLength,n=this._buffer8,i=this._buffer32,o=(t>>2)+1;this._dataLength+=t;let s=this._dataLength*8;if(n[t]=128,n[t+1]=n[t+2]=n[t+3]=0,i.set(r.buffer32Identity.subarray(o),o),t>55&&(r._md5cycle(this._state,i),i.set(r.buffer32Identity)),s<=4294967295)i[14]=s;else{let a=s.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;let u=parseInt(a[2],16),f=parseInt(a[1],16)||0;i[14]=u,i[15]=f}return r._md5cycle(this._state,i),e?this._state:r._hex(this._state)}};Y.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]);Y.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Y.hexChars="0123456789abcdef";Y.hexOut=[];Y.onePassHasher=new Y;if(Y.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");l();l();function tt(r){let e=new Y().appendStr(r).end();if(e===void 0)throw new Error("empty MD5 hash");return e.toString()}var Qr=class{constructor(e,t,n){c(this,"realm");c(this,"nonce");c(this,"opaque");c(this,"algorithm");c(this,"qop");c(this,"username");c(this,"ha1Base");c(this,"count");c(this,"nc",()=>(++this.count,this.count.toString(16).padStart(8,"0")));c(this,"cnonce",()=>new Array(4).fill(0).map(()=>Math.floor(Math.random()*256)).map(e=>e.toString(16)).join(""));c(this,"ha1",e=>{let t=this.ha1Base;return this.algorithm==="md5-sess"&&(t=tt(`${t}:${this.nonce}:${e}`)),t});c(this,"ha2",(e,t,n="")=>{let i=tt(`${e}:${t}`);if(this.algorithm==="md5-sess"){let o=tt(n);i=tt(`${e}:${t}:${o}`)}return i});c(this,"authorization",(e="GET",t="",n)=>{let i=this.nc(),o=this.cnonce(),s=this.ha1(o),a=this.ha2(e,t,n),u=this.qop===void 0?tt(`${s}:${this.nonce}:${a}`):tt(`${s}:${this.nonce}:${i}:${o}:${this.qop}:${a}`),f=[];return f.push(`username="${this.username}"`),f.push(`realm="${this.realm}"`),f.push(`nonce="${this.nonce}"`),f.push(`uri="${t}"`),this.qop!==void 0&&(f.push(`qop=${this.qop}`),f.push(`nc=${i}`),f.push(`cnonce="${o}"`)),f.push(`response="${u}"`),this.opaque!==void 0&&f.push(`opaque="${this.opaque}"`),`Digest ${f.join(", ")}`});let i=e.get("realm");if(i===void 0)throw new Error("no realm in digest challenge");this.realm=i,this.ha1Base=tt(`${t}:${i}:${n}`);let o=e.get("nonce");if(o===void 0)throw new Error("no nonce in digest challenge");this.nonce=o,this.opaque=e.get("opaque");let s=e.get("algorithm");s!==void 0?s==="md5"?this.algorithm="md5":s==="md5-sess"&&(this.algorithm="md5-sess"):this.algorithm="md5";let a=e.get("qop");if(a!==void 0){let u=a.split(",").map(f=>f.trim());u.some(f=>f==="auth")?this.qop="auth":u.some(f=>f==="auth-int")&&(this.qop="auth-int")}this.count=0,this.username=t}};l();var Ca=r=>{let[,e,...t]=r.split(" "),n=[],i=/\s*([^=]+)="([^"]*)",?/gm,o;do if(o=i.exec(t.join(" ")),o!==null){let[,a,u]=o;n.push([a,u])}while(o!==null);let s=new Map(n);return{type:e.toLowerCase(),params:s}};var Yl=401,Xl={username:"root",password:"pass"},Oe=class extends M{constructor(e={}){let{username:t,password:n}=Bt(Xl,e);if(t===void 0||n===void 0)throw new Error("need username and password");let i,o,s=Re(function(u,f,p){u.type===4&&(i=u,o&&u.headers&&(u.headers.Authorization=o)),p(void 0,u)}),a=Re(function(u,f,p){if(u.type===4&&Tt(u.data)===Yl){let y=u.data.toString().split(`
`).find(_=>/WWW-Auth/i.test(_));if(y===void 0)throw new Error("cannot find WWW-Authenticate header");let g=Ca(y);if(g.type==="basic")o=`Basic ${Buffer.from(`${t}:${n}`).toString("base64")}`;else if(g.type==="digest")o=new Qr(g.params,t,n).authorization(i.method,i.uri);else return;s.write(i,()=>p())}else p(void 0,u)});super(a,s)}};var Zr=class extends Mt{constructor(t){let{ws:n,rtsp:i,mediaElement:o,auth:s}=t;super(i);c(this,"onCanplay");c(this,"onSync");c(this,"onServerClose");c(this,"ready");c(this,"_src");c(this,"_sink");if(s){let f=new Oe(s);this.insertBefore(this.rtsp,f)}let a=new gt(o);a.onCanplay=()=>{a.play(),this.onCanplay&&this.onCanplay()},a.onSync=f=>{this.onSync&&this.onSync(f)},this.append(a),this._sink=a;let u=ne.open(n);this.ready=u.then(f=>{f.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(f),this._src=f})}close(){this.rtsp.stop(),this._src&&this._src.outgoing.end()}get currentTime(){return this._sink.currentTime}play(){return this._sink.play()}pause(){return this._sink.pause()}get bitrate(){return this._sink.bitrate}get framerate(){return this._sink.framerate}};l();l();var At=class extends It{constructor(t){let{ws:n,rtsp:i,mediaElement:o,auth:s}=t;super(i);c(this,"onSourceOpen");c(this,"onServerClose");c(this,"ready");c(this,"tracks");c(this,"_src");c(this,"_sink");if(s){let f=new Oe(s);this.insertBefore(this.rtsp,f)}let a=new De(o);a.onSourceOpen=(f,p)=>{this.tracks=p,this.onSourceOpen&&this.onSourceOpen(f,p)},this.append(a),this._sink=a;let u=ne.open(n);this.ready=u.then(f=>{f.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(f),this._src=f})}close(){this.rtsp.stop(),this._src&&this._src.outgoing.end()}get currentTime(){return this._sink.currentTime}play(){return Q(this,null,function*(){return yield this._sink.play()})}pause(){return this._sink.pause()}};var en=class extends At{constructor(e){let{metadataHandler:t}=e;super(e);let n=new Pe;this.insertAfter(this.rtsp,n);let i=M.fromHandlers(o=>{o.type===9&&t(o)},void 0);this.insertAfter(n,i)}};l();var Kl={parameters:["audio=0","video=0","event=on","ptz=all"]},tn=class extends ie{constructor(t){let{ws:n,rtsp:i,metadataHandler:o}=t;super(Object.assign({},Kl,i));c(this,"onServerClose");c(this,"ready");c(this,"_src");let s=new Pe;this.append(s);let a=ge.fromHandler(f=>{f.type===9&&o(f)});this.append(a);let u=ne.open(n);this.ready=u.then(f=>{f.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(f),this._src=f})}close(){this._src&&this._src.outgoing.end()}};l();var rn=class extends ie{constructor(t){let{ws:n,rtsp:i,auth:o}=t;super(i);c(this,"onServerClose");c(this,"ready");c(this,"_src");if(o){let a=new Oe(o);this.insertBefore(this.rtsp,a)}let s=ne.open(n);this.ready=s.then(a=>{a.onServerClose=()=>{this.onServerClose&&this.onServerClose()},this.prepend(a),this._src=a})}close(){this._src&&this._src.outgoing.end()}get sdp(){return this.ready.then(()=>Q(this,null,function*(){let t=new Promise(n=>{this.rtsp.onSdp=n});return this.rtsp.send({method:"DESCRIBE"}),this.rtsp.send({method:"TEARDOWN"}),yield t}))}};l();l();var Ma=A(be()),Ia=A(j());var Ei=(0,Ma.default)("msl:http-mp4"),nn=class extends oe{constructor(t){let{uri:n,options:i}=t,o=new Ia.Readable({objectMode:!0,read(){}});o.on("error",s=>{console.warn("closing socket due to incoming error",s),this._reader&&this._reader.cancel().catch(a=>console.error(a))});super(o);c(this,"uri");c(this,"options");c(this,"length");c(this,"onHeaders");c(this,"onServerClose");c(this,"_reader");c(this,"_abortController");c(this,"_allDone");o._read=()=>{this._pull()},this.uri=n,this.options=i,this._allDone=!1}play(){if(this.uri===void 0)throw new Error("cannot start playing when there is no URI");this._abortController=new AbortController,this.length=0,fetch(this.uri,J({credentials:"include",signal:this._abortController.signal},this.options)).then(t=>{if(t.body===null)throw new Error("empty response body");let n=t.headers.get("Content-Type");this.incoming.push({data:Buffer.alloc(0),type:8,mime:n}),this.onHeaders&&this.onHeaders(t.headers),this._reader=t.body.getReader(),this._pull()}).catch(t=>{console.error("http-source: fetch failed: ",t)})}abort(){this._reader&&this._reader.cancel().catch(t=>{console.log("http-source: cancel reader failed: ",t)}),this._abortController&&this._abortController.abort()}_isClosed(){return this._allDone}_close(){var t;this._reader=void 0,this._allDone=!0,this.incoming.push(null),(t=this.onServerClose)==null||t.call(this)}_pull(){this._reader!==void 0&&this._reader.read().then(({done:t,value:n})=>{if(t){this._isClosed()||(Ei("fetch completed, total downloaded: ",this.length," bytes"),this._close());return}if(n===void 0)throw new Error("expected value to be defined");if(this.length===void 0)throw new Error("expected length to be defined");this.length+=n.length;let i=Buffer.from(n);this.incoming.push({data:i,type:8})?this._pull():Ei("downstream back pressure: pausing read")}).catch(t=>{Ei("http-source: read failed: ",t),this._isClosed()||this._close()})}};var on=class extends Ne{constructor(t){let{http:n,mediaElement:i}=t,o=new nn(n),s=new De(i);o.onHeaders=a=>{this.onHeaders&&this.onHeaders(a)},o.onServerClose=()=>{var a;return(a=this.onServerClose)==null?void 0:a.call(this)};super(o,s);c(this,"onHeaders");c(this,"onServerClose");c(this,"http");c(this,"_src");c(this,"_sink");this._src=o,this._sink=s,this.http=o}close(){this._src&&this._src.abort()}get currentTime(){return this._sink.currentTime}play(){return Q(this,null,function*(){return yield this._sink.play()})}pause(){return this._sink.pause()}};var Si={};zt(Si,{RTCPPacketType:()=>yi,SDESItem:()=>xi,SR:()=>pa,Scheduler:()=>Ze,addRTSPRetry:()=>Aa,bodyOffset:()=>Wr,cSrc:()=>Ms,cSrcCount:()=>Ue,connectionEnded:()=>qr,contentBase:()=>Or,contentLocation:()=>Hr,extHeader:()=>Is,extHeaderLength:()=>jt,extension:()=>xr,extractHeaderValue:()=>ae,extractURIs:()=>va,getTime:()=>Vr,isRtcpApp:()=>ya,isRtcpBye:()=>Ur,isRtcpRR:()=>ha,isRtcpSDES:()=>ma,isRtcpSR:()=>Fr,marker:()=>xe,messageFromBuffer:()=>Gr,padding:()=>Rs,parse:()=>bi,parseRtcp:()=>gi,payload:()=>re,payloadType:()=>N,range:()=>jr,rtcpMessageFromBuffer:()=>Lr,sSrc:()=>Cs,sequence:()=>Dr,sequenceNumber:()=>Bs,sessionId:()=>Pr,sessionTimeout:()=>Nr,statusCode:()=>Tt,timestamp:()=>W,version:()=>Ts});l();l();l();var Aa=(r,{maxRetries:e,errors:t}={maxRetries:20,errors:[503]})=>{let n=0,i=r.onError;r.onError=o=>{if(i==null||i(o),!!t.includes(o.code)){if((n+=1)>e){console.log("retry, too many",n,e);return}setTimeout(()=>{var s;return(s=r.retry)==null?void 0:s.call(r)},n*100)}}};return qa(Jl);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=media-stream-library.min.js.map
